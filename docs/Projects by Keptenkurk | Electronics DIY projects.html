<!DOCTYPE html>
<!--[if IE 6]>
<html id="ie6" lang="en">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" lang="en">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" lang="en">
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)]><!-->
<html lang="en">
<!--<![endif]-->
<head>
<meta charset="UTF-8" />
<title>Projects by Keptenkurk | Electronics DIY projects</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="stylesheet" type="text/css" media="all" href="https://s0.wp.com/wp-content/themes/pub/twentyten/style.css" />
<link rel="pingback" href="https://keptenkurk.wordpress.com/xmlrpc.php" />
<link rel='dns-prefetch' href='//s2.wp.com' />
<link rel='dns-prefetch' href='//s1.wp.com' />
<link rel='dns-prefetch' href='//s0.wp.com' />
<link rel="alternate" type="application/rss+xml" title="Projects by Keptenkurk &raquo; Feed" href="https://keptenkurk.wordpress.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Projects by Keptenkurk &raquo; Comments Feed" href="https://keptenkurk.wordpress.com/comments/feed/" />
	<script type="text/javascript">
		/* <![CDATA[ */
		function addLoadEvent(func) {
			var oldonload = window.onload;
			if (typeof window.onload != 'function') {
				window.onload = func;
			} else {
				window.onload = function () {
					oldonload();
					func();
				}
			}
		}
		/* ]]> */
	</script>
			<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s0.wp.com\/wp-content\/mu-plugins\/wpcom-smileys\/twemoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/s1.wp.com\/wp-includes\/js\/wp-emoji-release.min.js?m=1473172720h&ver=4.6.1-RC1-38499"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='all-css-0-1' href='https://s0.wp.com/_static/??-eJyNkd1uwyAMhV9oDG2quuVi2rMAdRO3gBF2FOXt6yRaqm0d2g06NufDP9ipmEBZIItNoylx7DGznUqgZDhhhPlH9ByYn+xjLOIV2F5AigtXs0YtO+YzZpR5Fy0zD1Ql0EkLqMtyRJUDTWa/aNGBKmg+FSeLI8EJHURIamthqRy/qEUOOlZzom1T3pcKzEbPhGMyMmih39yWtmX0ViZNzJq1LHMEs76zAWgzCSrDu2h10AOZSMEJUv4WmHN0WFtoBR+pV9mvG76H//rDR9O0QBeWrryrd/XXhoaD7SN5FxfDZ/p4Obx13Wv3fjhebpVYChw=' type='text/css' media='all' />
<script type='text/javascript' src='https://s1.wp.com/_static/??-eJyF0NsKwjAMBuAXsiuepl6Iz9LV35G6Hmxahz69FSYiVIVAIPkISeQYBDk95CNYmhKXjHibUmN4Jn8BYamPKqGx5F5Ye5fg0tNa39EAkRlR9aVWBp18xQXPyYK5oEr3cyVyV8L4lxmkoPRZRDDdUTuEw3vn7x+Y1MHu56u2XS+Wu83WPACvA3MG'></script>
<link rel='stylesheet' id='all-css-0-2' href='https://s1.wp.com/wp-content/mu-plugins/highlander-comments/style.css?m=1377793621h' type='text/css' media='all' />
<!--[if lt IE 8]>
<link rel='stylesheet' id='highlander-comments-ie7-css'  href='https://s1.wp.com/wp-content/mu-plugins/highlander-comments/style-ie7.css?m=1351637563h&#038;ver=20110606' type='text/css' media='all' />
<![endif]-->
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://keptenkurk.wordpress.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://s1.wp.com/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress.com" />
<link rel='shortlink' href='http://wp.me/4TZXF' />

<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="website" />
<meta property="og:title" content="Projects by Keptenkurk" />
<meta property="og:description" content="Electronics DIY projects" />
<meta property="og:url" content="https://keptenkurk.wordpress.com/" />
<meta property="og:site_name" content="Projects by Keptenkurk" />
<meta property="og:image" content="https://s0.wp.com/i/blank.jpg" />
<meta property="og:locale" content="en_US" />
<meta name="twitter:site" content="@wordpressdotcom" />
<meta property="fb:app_id" content="249643311490" />
<link rel="shortcut icon" type="image/x-icon" href="https://s2.wp.com/i/favicon.ico" sizes="16x16 24x24 32x32 48x48" />
<link rel="icon" type="image/x-icon" href="https://s2.wp.com/i/favicon.ico" sizes="16x16 24x24 32x32 48x48" />
<link rel="apple-touch-icon-precomposed" href="https://s0.wp.com/i/webclip.png" />
<link rel='openid.server' href='https://keptenkurk.wordpress.com/?openidserver=1' />
<link rel='openid.delegate' href='https://keptenkurk.wordpress.com/' />
<link rel="search" type="application/opensearchdescription+xml" href="https://keptenkurk.wordpress.com/osd.xml" title="Projects by Keptenkurk" />
<link rel="search" type="application/opensearchdescription+xml" href="https://s1.wp.com/opensearch.xml" title="WordPress.com" />
		<style type="text/css">
			.recentcomments a {
				display: inline !important;
				padding: 0 !important;
				margin: 0 !important;
			}

			table.recentcommentsavatartop img.avatar, table.recentcommentsavatarend img.avatar {
				border: 0px;
				margin: 0;
			}

			table.recentcommentsavatartop a, table.recentcommentsavatarend a {
				border: 0px !important;
				background-color: transparent !important;
			}

			td.recentcommentsavatarend, td.recentcommentsavatartop {
				padding: 0px 0px 1px 0px;
				margin: 0px;
			}

			td.recentcommentstextend {
				border: none !important;
				padding: 0px 0px 2px 10px;
			}

			.rtl td.recentcommentstextend {
				padding: 0px 10px 2px 0px;
			}

			td.recentcommentstexttop {
				border: none;
				padding: 0px 0px 0px 10px;
			}

			.rtl td.recentcommentstexttop {
				padding: 0px 10px 0px 0px;
			}
		</style>
		<meta name="application-name" content="Projects by Keptenkurk" /><meta name="msapplication-window" content="width=device-width;height=device-height" /><meta name="msapplication-tooltip" content="Electronics DIY projects" /><meta name="msapplication-task" content="name=Subscribe;action-uri=https://keptenkurk.wordpress.com/feed/;icon-uri=https://s2.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=Sign up for a free blog;action-uri=http://wordpress.com/signup/;icon-uri=https://s2.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Support;action-uri=http://support.wordpress.com/;icon-uri=https://s2.wp.com/i/favicon.ico" /><meta name="msapplication-task" content="name=WordPress.com Forums;action-uri=http://forums.wordpress.com/;icon-uri=https://s2.wp.com/i/favicon.ico" /><meta name="title" content="Projects by Keptenkurk on WordPress.com" />
<meta name="description" content="Electronics DIY projects" />
<style type="text/css" id="syntaxhighlighteranchor"></style>
</head>

<body class="home blog mp6 customizer-styles-applied single-author highlander-enabled highlander-light infinite-scroll neverending">
<div id="wrapper" class="hfeed">
	<div id="header">
		<div id="masthead">
			<div id="branding" role="banner">
								<h1 id="site-title">
					<span>
						<a href="https://keptenkurk.wordpress.com/" title="Projects by Keptenkurk" rel="home">Projects by Keptenkurk</a>
					</span>
				</h1>
				<div id="site-description">Electronics DIY projects</div>

										<a class="home-link" href="https://keptenkurk.wordpress.com/" title="Projects by Keptenkurk" rel="home">
							<img src="https://keptenkurk.files.wordpress.com/2014/08/cropped-cropped-b_pi_2_of_4_1024x1024.jpg" width="940" height="198" alt="" />
						</a>
								</div><!-- #branding -->

			<div id="access" role="navigation">
			  				<div class="skip-link screen-reader-text"><a href="#content" title="Skip to content">Skip to content</a></div>
								<div class="menu"><ul><li class="current_page_item"><a href="https://keptenkurk.wordpress.com/">Home</a></li><li class="page_item page-item-1"><a href="https://keptenkurk.wordpress.com/about/">About</a></li></ul></div>
			</div><!-- #access -->
		</div><!-- #masthead -->
	</div><!-- #header -->

	<div id="main">

		<div id="container">
			<div id="content" role="main">

			
	<div id="nav-above" class="navigation">
		<div class="nav-previous"><a href="https://keptenkurk.wordpress.com/page/2/" ><span class="meta-nav">&larr;</span> Older posts</a></div>
		<div class="nav-next"></div>
	</div><!-- #nav-above -->




			<div id="post-394" class="post-394 post type-post status-publish format-standard hentry category-ff32 tag-ble tag-bluetooth tag-bluez tag-bs440 tag-gatttool tag-medisana tag-pygatt tag-python">
							<h2 class="entry-title"><a href="https://keptenkurk.wordpress.com/2016/03/30/connecting-the-medisana-bs440-bluetooth-scale-part-5/" rel="bookmark">Connecting the Medisana BS440 Bluetooth scale (part&nbsp;5)</a></h2>			
			<div class="entry-meta">
									<span class="meta-prep meta-prep-author">Posted on</span> <a href="https://keptenkurk.wordpress.com/2016/03/30/connecting-the-medisana-bs440-bluetooth-scale-part-5/" title="16:33" rel="bookmark"><span class="entry-date">30/03/2016</span></a>					<span class="by-author"><span class="sep">by</span> <span class="author vcard"><a class="url fn n" href="https://keptenkurk.wordpress.com/author/keptenkurk/" title="View all posts by keptenkurk" rel="author">keptenkurk</a></span> </span>							</div><!-- .entry-meta -->

				<div class="entry-content">
				<p>Triggered by a comment on episode 1 of this blog i decided to use <a href="http://www.domoticz.com/">Domoticz</a> to visualize the measurements in a graph. I use Domoticz to control my home since july 2013 and it has proven to be very reliable.</p>
<p>To graph the weight first a &#8220;virtual sensor&#8221; must be created. First find a unique index and paste the url below in your browser:</p>
<pre><code>http://domoticzip:8080/json.htm?type=command&amp;param=udevice&amp;hid=2&amp;did=60&amp;dunit=4&amp;
dtype=93&amp;dsubtype=1&amp;nvalue=0&amp;svalue=75.0
* did=60 represents the device ID number for this device 
  (could be any unique number). Make a note of it. 
  Upon creation the device will be given an unique index.
* dtype=93 refers to the BWR102 device, a Oregon Scientific connected scale we mimic.
* svalue=75.0 refers to the weight. Every call to this URL will update the value.
</code></pre>
<p>After creation of the virtual sensor, push the green button to have the sensor showing up on the &#8220;Other devices&#8221; tab:</p>
<p><img data-attachment-id="425" data-permalink="https://keptenkurk.wordpress.com/2016/03/30/connecting-the-medisana-bs440-bluetooth-scale-part-5/domoticz1/" data-orig-file="https://keptenkurk.files.wordpress.com/2016/03/domoticz1.jpg?w=640" data-orig-size="1341,318" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Domoticz1" data-image-description="" data-medium-file="https://keptenkurk.files.wordpress.com/2016/03/domoticz1.jpg?w=640?w=300" data-large-file="https://keptenkurk.files.wordpress.com/2016/03/domoticz1.jpg?w=640?w=640" class="alignnone size-full wp-image-425" src="https://keptenkurk.files.wordpress.com/2016/03/domoticz1.jpg?w=640" alt="Domoticz1" srcset="https://keptenkurk.files.wordpress.com/2016/03/domoticz1.jpg?w=640 640w, https://keptenkurk.files.wordpress.com/2016/03/domoticz1.jpg?w=1280 1280w, https://keptenkurk.files.wordpress.com/2016/03/domoticz1.jpg?w=150 150w, https://keptenkurk.files.wordpress.com/2016/03/domoticz1.jpg?w=300 300w, https://keptenkurk.files.wordpress.com/2016/03/domoticz1.jpg?w=768 768w, https://keptenkurk.files.wordpress.com/2016/03/domoticz1.jpg?w=1024 1024w" sizes="(max-width: 640px) 100vw, 640px"   /></p>
<p>Other Devices tab:</p>
<p><img data-attachment-id="427" data-permalink="https://keptenkurk.wordpress.com/2016/03/30/connecting-the-medisana-bs440-bluetooth-scale-part-5/domoticz2/" data-orig-file="https://keptenkurk.files.wordpress.com/2016/03/domoticz2.jpg?w=640" data-orig-size="1193,425" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Domoticz2" data-image-description="" data-medium-file="https://keptenkurk.files.wordpress.com/2016/03/domoticz2.jpg?w=640?w=300" data-large-file="https://keptenkurk.files.wordpress.com/2016/03/domoticz2.jpg?w=640?w=640" class="alignnone size-full wp-image-427" src="https://keptenkurk.files.wordpress.com/2016/03/domoticz2.jpg?w=640" alt="Domoticz2" srcset="https://keptenkurk.files.wordpress.com/2016/03/domoticz2.jpg?w=640 640w, https://keptenkurk.files.wordpress.com/2016/03/domoticz2.jpg?w=150 150w, https://keptenkurk.files.wordpress.com/2016/03/domoticz2.jpg?w=300 300w, https://keptenkurk.files.wordpress.com/2016/03/domoticz2.jpg?w=768 768w, https://keptenkurk.files.wordpress.com/2016/03/domoticz2.jpg?w=1024 1024w, https://keptenkurk.files.wordpress.com/2016/03/domoticz2.jpg 1193w" sizes="(max-width: 640px) 100vw, 640px"   /></p>
<p>Now the sensors are ready the BS440 program can call the sensor URL with the appropriate Device number and weight (see BS440domoticz.py). In the .ini file the Domoticz connection parameters (IP-adres and username/password) can be entered.</p>
<p>Now every time a user steps on the scale the weight will be logged and graphed.</p>
<p><img data-attachment-id="435" data-permalink="https://keptenkurk.wordpress.com/2016/03/30/connecting-the-medisana-bs440-bluetooth-scale-part-5/domoticz3/" data-orig-file="https://keptenkurk.files.wordpress.com/2016/03/domoticz3.jpg?w=640" data-orig-size="1218,381" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Domoticz3" data-image-description="" data-medium-file="https://keptenkurk.files.wordpress.com/2016/03/domoticz3.jpg?w=640?w=300" data-large-file="https://keptenkurk.files.wordpress.com/2016/03/domoticz3.jpg?w=640?w=640" class="alignnone size-full wp-image-435" src="https://keptenkurk.files.wordpress.com/2016/03/domoticz3.jpg?w=640" alt="Domoticz3" srcset="https://keptenkurk.files.wordpress.com/2016/03/domoticz3.jpg?w=640 640w, https://keptenkurk.files.wordpress.com/2016/03/domoticz3.jpg?w=150 150w, https://keptenkurk.files.wordpress.com/2016/03/domoticz3.jpg?w=300 300w, https://keptenkurk.files.wordpress.com/2016/03/domoticz3.jpg?w=768 768w, https://keptenkurk.files.wordpress.com/2016/03/domoticz3.jpg?w=1024 1024w, https://keptenkurk.files.wordpress.com/2016/03/domoticz3.jpg 1218w" sizes="(max-width: 640px) 100vw, 640px"   /></p>
<p>To have consistent results it is advised to do your weighings at the same time of day. In my case this will be between 07:00 and 08:00 in the morning (8:00 &#8211; 11:00 in the weekends). I use an IP controlled switch based on a <a href="http://www.banggood.com/DIY-Wi-Fi-Wireless-Switch-For-Smart-Home-With-ABS-Shell-p-1019971.html">Sonoff</a> ESP8266 based 220V switch flashed with <a href="http://www.esp8266.nu/index.php/ESPEasy">ESP Easy</a> firmware. Now Domoticz can switch on/off the Raspberry through WiFi by calling the ip address of the Sonoff like</p>
<pre><code>http://ip-address/control?cmd=gpio,12,1 (=on) 
http://ip-address/control?cmd=gpio,12,0 (=off)</code></pre>
<p><img data-attachment-id="478" data-permalink="https://keptenkurk.wordpress.com/2016/03/30/connecting-the-medisana-bs440-bluetooth-scale-part-5/domoticz4/" data-orig-file="https://keptenkurk.files.wordpress.com/2016/03/domoticz4.jpg?w=560&#038;h=318" data-orig-size="769,436" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Domoticz4" data-image-description="" data-medium-file="https://keptenkurk.files.wordpress.com/2016/03/domoticz4.jpg?w=560&#038;h=318?w=300" data-large-file="https://keptenkurk.files.wordpress.com/2016/03/domoticz4.jpg?w=560&#038;h=318?w=640" class="alignnone wp-image-478" src="https://keptenkurk.files.wordpress.com/2016/03/domoticz4.jpg?w=560&#038;h=318" alt="Domoticz4" width="560" height="318" srcset="https://keptenkurk.files.wordpress.com/2016/03/domoticz4.jpg?w=560&amp;h=318 560w, https://keptenkurk.files.wordpress.com/2016/03/domoticz4.jpg?w=150&amp;h=85 150w, https://keptenkurk.files.wordpress.com/2016/03/domoticz4.jpg?w=300&amp;h=170 300w, https://keptenkurk.files.wordpress.com/2016/03/domoticz4.jpg?w=768&amp;h=435 768w, https://keptenkurk.files.wordpress.com/2016/03/domoticz4.jpg 769w" sizes="(max-width: 560px) 100vw, 560px" /></p>
<p>Before switching off at 8:15 (11:15 in the weekeinds) be sure that a cron job did a shutdown earlier to not corrupt the flash card. Also when powering up, the &#8220;python BS440.py&#8221; needs to be started automatically through BS440.sh and a @reboot cron. These are the cron definitions to accomplish this:</p>
<pre><code>@reboot sh /home/pi/BS440.sh &gt; /home/pi/cronlog 2&amp;1
0 8 * * 1,2,3,4,5 sudo shutdown -h +0
0 11 * * 0,6 sudo shutdown -h +0 </code></pre>
<p>A 1 minute sleep is inserted in BS440.sh to have a stable booted Raspberry before starting the bluetooth communications in background.</p>
<pre><code>
#!/bin/sh
cd /
cd home/pi
sleep 1m
sudo python BS440.py &amp;
cd /
</code></pre>
							</div><!-- .entry-content -->
	
			<div class="entry-utility">
									<span class="cat-links">
						<span class="entry-utility-prep entry-utility-prep-cat-links">Posted in</span> <a href="https://keptenkurk.wordpress.com/category/ff32/" rel="category tag">FF32</a>					</span>
								
	<span class="meta-sep">|</span>
	<span class="tag-links">
		<span class="entry-utility-prep entry-utility-prep-tag-links">Tagged</span> <a href="https://keptenkurk.wordpress.com/tag/ble/" rel="tag">BLE</a>, <a href="https://keptenkurk.wordpress.com/tag/bluetooth/" rel="tag">bluetooth</a>, <a href="https://keptenkurk.wordpress.com/tag/bluez/" rel="tag">bluez</a>, <a href="https://keptenkurk.wordpress.com/tag/bs440/" rel="tag">BS440</a>, <a href="https://keptenkurk.wordpress.com/tag/gatttool/" rel="tag">gatttool</a>, <a href="https://keptenkurk.wordpress.com/tag/medisana/" rel="tag">Medisana</a>, <a href="https://keptenkurk.wordpress.com/tag/pygatt/" rel="tag">pygatt</a>, <a href="https://keptenkurk.wordpress.com/tag/python/" rel="tag">Python</a>	</span>

										<span class="meta-sep">|</span>
					<span class="comments-link"><a href="https://keptenkurk.wordpress.com/2016/03/30/connecting-the-medisana-bs440-bluetooth-scale-part-5/#comments">6 Comments</a></span>
											</div><!-- .entry-utility -->
		</div><!-- #post-## -->

		
	


			<div id="post-377" class="post-377 post type-post status-publish format-standard hentry category-ble tag-ble tag-bluetooth tag-bluez tag-bs440 tag-gatttool tag-medisana tag-pygatt tag-python">
							<h2 class="entry-title"><a href="https://keptenkurk.wordpress.com/2016/03/26/connecting-the-medisana-bs440-bluetooth-scale-part-4/" rel="bookmark">Connecting the Medisana BS440 Bluetooth scale (part&nbsp;4)</a></h2>			
			<div class="entry-meta">
									<span class="meta-prep meta-prep-author">Posted on</span> <a href="https://keptenkurk.wordpress.com/2016/03/26/connecting-the-medisana-bs440-bluetooth-scale-part-4/" title="23:48" rel="bookmark"><span class="entry-date">26/03/2016</span></a>					<span class="by-author"><span class="sep">by</span> <span class="author vcard"><a class="url fn n" href="https://keptenkurk.wordpress.com/author/keptenkurk/" title="View all posts by keptenkurk" rel="author">keptenkurk</a></span> </span>							</div><!-- .entry-meta -->

				<div class="entry-content">
				<p>To start with: i am not a professional programmer, never was, never will be. Started off with some assembly on a 8 bit (yes!) <a href="https://en.wikipedia.org/wiki/National_Semiconductor_SC/MP">SC/MP processor</a> in my early days and ended with Turbo Pascal on MS-DOS6.2 as highest level of sophistication. Maybe that&#8217;s why i enjoy poking around on the credit-card size Raspberry in Python. The wealth of internet resources surely helps. This journey learned me about C-structs, callback routines, running shell commands, logging, parsing ini files, exception handling, pep8 and of course a little bluetooth. The complete code can be found  on my <a href="https://github.com/keptenkurk/BS440">Github pages</a></p>
<p>The sequence of commands we want to issue through gatttool after being connected to the scale are basically these (when issued from the shell, pygatt will use the interactive mode of gatttool):</p>
<pre><code>gatttool -t random -b F1:37:57:XX:XX:XX --char-write --handle 0x001f -n 0200
gatttool -t random -b F1:37:57:XX:XX:XX --char-write --handle 0x001c -n 0200
gatttool -t random -b F1:37:57:XX:XX:XX --char-write --handle 0x0026 -n 0200
gatttool -t random -b F1:37:57:XX:XX:XX --char-write-req --handle 0x0023 -n 0000000000 --listen</code></pre>
<p>But the problem is we need to connect first and connecting is only possible for about one minute after the person has stepped onto the scale and we don&#8217;t know when that will be. The first attempt was just endless keep on trying to connect with 5 second timeouts. This is what it looked like:</p>
<pre><code>adapter = pygatt.backends.GATTToolBackend()
adapter.start()
# wait for someone to step on the scale
while True:  
    try:
        device = adapter.connect('f1:37:57:xx:xx:xx', 5, 'random')
        break
    except pygatt.exceptions.NotConnectedError:
        print('Waiting...')</code></pre>
<p>after which the program would continue with regestering to the indications and reading data&#8230; However every connection attempt/timeout would take more and more time every go, eventually slowing down to once a minute. Also CPU utilization would rise to 100% for some obscure reason.</p>
<p>The current approach uses the &#8220;hcitool lescan&#8221; command to scan for active bluetooth devices (filtered on our device of interest) before attempting to connect. This works better although the bluetooth driver needs a reset after every &#8220;hcitool lescan&#8221;/timeout by issuing the pygatt &#8220;adapter.reset()&#8221; command. Probably because &#8220;hcitool lescan&#8221; is not nicely terminated. There is some discussion about this behaviour of Pygatt at the <a href="https://github.com/peplin/pygatt/issues/4">Pygatt repo of Peplin</a>. For now i just reset the interface after every timeout. Not nice but it works!</p>
<p>Awaiting the code to put data in a database and adding a nice web interface to it, last three measurements will be sent to the user by e-mail. The first step in tracking your weight!</p>
<pre><code> </code></pre>
<p>21-03 07:4723-03 07:2323-03 23:30<br />
76.375.976.9<br />
17.717.417.7<br />
36.736.936.7<br />
2.92.92.9<br />
64.564.764.5<br />
258725792600</p>
<table>
<tbody>
<tr>
<th>Datum</th>
</tr>
<tr>
<td>Gewicht (kg)</td>
<td>Vet (%)</td>
<td>Spieren (%)</td>
<td>Botten (kg)</td>
<td>Water (%)</td>
<td>Verbruik (kCal)</td>
</tr>
</tbody>
</table>
<p>Feel free to ask for more clarification and meanwhile: enjoy coding!</p>
							</div><!-- .entry-content -->
	
			<div class="entry-utility">
									<span class="cat-links">
						<span class="entry-utility-prep entry-utility-prep-cat-links">Posted in</span> <a href="https://keptenkurk.wordpress.com/category/ble/" rel="category tag">BLE</a>					</span>
								
	<span class="meta-sep">|</span>
	<span class="tag-links">
		<span class="entry-utility-prep entry-utility-prep-tag-links">Tagged</span> <a href="https://keptenkurk.wordpress.com/tag/ble/" rel="tag">BLE</a>, <a href="https://keptenkurk.wordpress.com/tag/bluetooth/" rel="tag">bluetooth</a>, <a href="https://keptenkurk.wordpress.com/tag/bluez/" rel="tag">bluez</a>, <a href="https://keptenkurk.wordpress.com/tag/bs440/" rel="tag">BS440</a>, <a href="https://keptenkurk.wordpress.com/tag/gatttool/" rel="tag">gatttool</a>, <a href="https://keptenkurk.wordpress.com/tag/medisana/" rel="tag">Medisana</a>, <a href="https://keptenkurk.wordpress.com/tag/pygatt/" rel="tag">pygatt</a>, <a href="https://keptenkurk.wordpress.com/tag/python/" rel="tag">Python</a>	</span>

										<span class="meta-sep">|</span>
					<span class="comments-link"><a href="https://keptenkurk.wordpress.com/2016/03/26/connecting-the-medisana-bs440-bluetooth-scale-part-4/#comments">2 Comments</a></span>
											</div><!-- .entry-utility -->
		</div><!-- #post-## -->

		
	


			<div id="post-372" class="post-372 post type-post status-publish format-standard hentry category-ble tag-ble tag-bluetooth tag-bluez tag-bs440 tag-gatttool tag-medisana tag-pygatt tag-python">
							<h2 class="entry-title"><a href="https://keptenkurk.wordpress.com/2016/03/26/connecting-the-medisana-bs440-bluetooth-scale-part-3/" rel="bookmark">Connecting the Medisana BS440 Bluetooth scale (part&nbsp;3)</a></h2>			
			<div class="entry-meta">
									<span class="meta-prep meta-prep-author">Posted on</span> <a href="https://keptenkurk.wordpress.com/2016/03/26/connecting-the-medisana-bs440-bluetooth-scale-part-3/" title="22:39" rel="bookmark"><span class="entry-date">26/03/2016</span></a>					<span class="by-author"><span class="sep">by</span> <span class="author vcard"><a class="url fn n" href="https://keptenkurk.wordpress.com/author/keptenkurk/" title="View all posts by keptenkurk" rel="author">keptenkurk</a></span> </span>							</div><!-- .entry-meta -->

				<div class="entry-content">
				<p>Time to dive into the (bluetooth) specifics of the BS440 scale. When starting this project i was lucky to bump into <a href="http://stackoverflow.com/questions/34271217/solved-connecting-to-a-bluetooth-smart-le-weight-scale-with-bluez-bluetoothctl-g/34559392#34559392">this post</a> on StackOverflow where user Edmundo was actually trying to acomplish the same. He snooped the bluetooth traffic on his Android phone and thus discovered the commands to send to the scale to make it send the data we need.</p>
<p>Data is presented to us by use of Indications. Indications are messages conveying the data for certain characteristics the device supports. Characteristics have a long (16 byte globally unique UUID) identifier but also a two-byte shortcut for it: the handle. Writing the command 0200 to a handle tells the device you register to the indications of this characteristic. Writing 0000 will stop it. A data packet of this characteristic will report with a handle 1 less than the handle of the characteristic. The BS440 has 3 kinds of interesting characteristics:</p>
<pre><code><span style="text-decoration:underline;">Handle UUID</span>                                  <span style="text-decoration:underline;">Data</span>
0x26   00008a82-0000-1000-8000-00805f9b34fb  person, gender, age, size, activity
0x1c   00008a21-0000-1000-8000-00805f9b34fb  weight, time, person
0x1f   00008a22-0000-1000-8000-00805f9b34fb  time, person, kcal, fat, tbw, muscle, bone</code></pre>
<p>Some notes: <strong>person</strong> ranges from 1~8 and corresponds with the user selected before stepping on the scale. Or: being a &#8220;smart scale&#8221; : if the weight roughly corresponds to a known user weight that user is automatically selected. And when multiple users with the same weight are found it even lets you select the appropriate user.</p>
<h3>So what does the data look like?</h3>
<p>The last 30 measurements per person will be stored in the scale and upon communication the history for this user will be dumped. So you will receive values like this</p>
<pre><code>handle=0x25, value=0x845302800134b6e0000000000000000000000000
handle=0x1b, value=0x1d8c1e00fe6e0aa056451100ff020900000000
handle=0x1e, value=0x6f6e0aa05602440ab8f07ff26bf11ef0000000
handle=0x1b, value=0x1d961e00fe72fe9f56291100ff020900000000
handle=0x1e, value=0x6f72fe9f5602460ab8f07ff26bf11ef0000000
handle=0x1b, value=0x1d961e00fe2dfe9f569e1000ff020900000000
handle=0x1e, value=0x6f2dfe9f5602460ab8f080f26cf11ef0000000
handle=0x1b, value=0x1d8c1e00feb3fd9f56c21000ff020900000000
handle=0x1e, value=0x6fb3fd9f5602440ab8f080f26cf11ef0000000
handle=0x1b, value=0x1d8c1e00fe39fc9f56641000ff020900000000
handle=0x1e, value=0x6f39fc9f5602440ab8f080f26cf11ef0000000
handle=0x1b, value=0x1d8c1e00fe02fb9f56991000ff020900000000
handle=0x1e, value=0x6f02fb9f5602440ab8f080f26cf11ef0000000
handle=0x1b, value=0x1d8c1e00fe80fa9f561d1000ff020900000000
handle=0x1e, value=0x6f80fa9f5602440ab7f080f26cf11ef0000000
handle=0x1b, value=0x1d8c1e00fef7f89f56021100ff020900000000
handle=0x1e, value=0x6ff7f89f5602440ab8f080f26bf11ef0000000
handle=0x1b, value=0x1d8c1e00fe10f39f566a1000ff020900000000
handle=0x1e, value=0x6f10f39f5602440ab8f080f26cf11ef0000000
etc.</code></pre>
<h3>Nice, but what does it actually mean?</h3>
<p>Now the puzzle starts where to find the data we need, but luckily <a href="http://stackoverflow.com/questions/34287210/a-little-game-quiz-do-you-see-my-values-interpreting-hex-values">Edmundo</a> helps us out again:</p>
<pre><code>All multibyte values represented in unsigned int, little endian (multi byte values 
start with least significant byte).
First byte of string is byte 0.
<span style="text-decoration:underline;">0x1b:                              value                    </span> 
fixed: byte: 0                     [0x1d]
weight: byte: 1 &amp; 2                [kg*100]
timestamp: byte 5-8                Unix timestamp
person: byte 13                    [1..8]

<span style="text-decoration:underline;">0x1e:                              value                    </span>
fixed: byte 0                      [0x6f]
timestamp: byte 1-4                Unix timestamp
person: byte 5                     [1..8]
kcal: byte 6 &amp; 7                   first nibble = 0xf, [kcal]
fat: byte 8 &amp; 9                    first nibble = 0xf, [fat*10]
tbw: byte 10 &amp; 11                  first nibble = 0xf, [tbw*10] 
muscle: byte 12 &amp; 13               first nibble = 0xf, [muscle*10]
bone: byte 14 &amp; 15                 first nibble = 0xf, [bone*10]

<span style="text-decoration:underline;">0x25:                               value                   </span>
fixed: byte 0                       [0x84]
person: byte 2                      [1..8]
gender: byte 4 (1=male, 2=female)   [1|2] 
age: byte 5                         [year]
size: byte 6                        [cm]
activity: byte 8 (0=normal, 3=high) [0|3]</code></pre>
<p>In Python the datastrings can be interpreted simply using <a href="https://docs.python.org/2/library/struct.html">struct.unpack</a> using the pattern &#8216;BxBxBBBxB&#8217; for the 0x25 data, &#8216;&lt;BHxxIxxxxB&#8217; for the 0x1b data and &#8216;&lt;BIBHHHHH&#8217; for the 0x1e data. In my program BS440decode.py takes care of the decoding job.</p>
<p>These insights should get us going. Just one more thing. When does the scale start sending data? Data transfer starts after sending 0x02 followed by the unix timestamp to handle 0x23. This is also the way the scale resyncs it&#8217;s RTC. Note that this last write must be a write with response (i.e. &#8220;write-req&#8221; instead of a &#8220;write-cmd&#8221;).</p>
<p>By now you might start to understand why this project dragged over 3 months to complete. Part 4 will discuss the Python code.</p>
<p>&nbsp;</p>
							</div><!-- .entry-content -->
	
			<div class="entry-utility">
									<span class="cat-links">
						<span class="entry-utility-prep entry-utility-prep-cat-links">Posted in</span> <a href="https://keptenkurk.wordpress.com/category/ble/" rel="category tag">BLE</a>					</span>
								
	<span class="meta-sep">|</span>
	<span class="tag-links">
		<span class="entry-utility-prep entry-utility-prep-tag-links">Tagged</span> <a href="https://keptenkurk.wordpress.com/tag/ble/" rel="tag">BLE</a>, <a href="https://keptenkurk.wordpress.com/tag/bluetooth/" rel="tag">bluetooth</a>, <a href="https://keptenkurk.wordpress.com/tag/bluez/" rel="tag">bluez</a>, <a href="https://keptenkurk.wordpress.com/tag/bs440/" rel="tag">BS440</a>, <a href="https://keptenkurk.wordpress.com/tag/gatttool/" rel="tag">gatttool</a>, <a href="https://keptenkurk.wordpress.com/tag/medisana/" rel="tag">Medisana</a>, <a href="https://keptenkurk.wordpress.com/tag/pygatt/" rel="tag">pygatt</a>, <a href="https://keptenkurk.wordpress.com/tag/python/" rel="tag">Python</a>	</span>

										<span class="meta-sep">|</span>
					<span class="comments-link"><a href="https://keptenkurk.wordpress.com/2016/03/26/connecting-the-medisana-bs440-bluetooth-scale-part-3/#respond">Leave a comment</a></span>
											</div><!-- .entry-utility -->
		</div><!-- #post-## -->

		
	


			<div id="post-365" class="post-365 post type-post status-publish format-standard hentry category-ble tag-ble tag-bluetooth tag-bluez tag-bs440 tag-gatttool tag-medisana tag-pygatt tag-python">
							<h2 class="entry-title"><a href="https://keptenkurk.wordpress.com/2016/03/26/connecting-the-medisana-bs440-bluetooth-scale-part-2/" rel="bookmark">Connecting the Medisana BS440 Bluetooth scale (part&nbsp;2)</a></h2>			
			<div class="entry-meta">
									<span class="meta-prep meta-prep-author">Posted on</span> <a href="https://keptenkurk.wordpress.com/2016/03/26/connecting-the-medisana-bs440-bluetooth-scale-part-2/" title="01:34" rel="bookmark"><span class="entry-date">26/03/2016</span></a>					<span class="by-author"><span class="sep">by</span> <span class="author vcard"><a class="url fn n" href="https://keptenkurk.wordpress.com/author/keptenkurk/" title="View all posts by keptenkurk" rel="author">keptenkurk</a></span> </span>							</div><!-- .entry-meta -->

				<div class="entry-content">
				<p>It&#8217;s been a while after part one but not because of me abandoning the subject. On the contrary: i must have been stepping on an off that darn scale like a million times trying to debug my way around the BLE mysteries.</p>
<p>Continuing the previous post we now should first install Pygatt. It installs through the pip installer which needs to be installed first.</p>
<pre><code>sudo apt-get install python-pip</code></pre>
<p>after which pygatt and all dependencies may be installed</p>
<pre><code>sudo pip install 'pygatt[GATTTOOL]'</code></pre>
<p>Apart from throwing all kinds of errors and warnings it ends with &#8220;Successfully installed&#8230;&#8221;. To be able to use Pygatt for my purpose i needed to fix another few things.</p>
<p><del>Fix 1: Support for receiving multibyte indications</del></p>
<p><del>Receiving data from the scale is performed by subscribing to an indication. The indications contain 40 hex characters and the installed Pygatt (as of march 2016) does not support that. <a href="https://github.com/IlyaSukhanov/pygatt/blob/multibyte_gatttool_notifications/pygatt/backends/gatttool/gatttool.py">Ilya Sukhanov</a> fixed that in function &#8220;_handle_notification_string&#8221; but his changes have not been merged (yet).</del></p>
<p><del>But Ilya made some more improvements so just grab his gatttool.py entirely and replace the one found at /usr/local/lib/python2.7/dist-packages/pygatt/backends/gatttool</del></p>
<p>EDIT: As of 6/9/16 the above changes have been merged into Peplin&#8217;s master</p>
<p>Fix 2: Restarting bluetooth</p>
<p>At adapter.start() Pygatt will first try to restart the bluetooth service by &#8220;sudo systemctl restart bluetooth&#8221; however on debian Jessie this should be &#8220;sudo systemctl restart bluetooth<strong>.target</strong>&#8220;. This is changed manually at the bottom of gatttool.py by changing &#8220;subprocess.Popen([<span class="pl-s"><span class="pl-pds">&#8220;</span>sudo<span class="pl-pds">&#8220;</span></span>, <span class="pl-s"><span class="pl-pds">&#8220;</span>systemctl<span class="pl-pds">&#8220;</span></span>, <span class="pl-s"><span class="pl-pds">&#8220;</span>restart<span class="pl-pds">&#8220;</span></span>, <span class="pl-s"><span class="pl-pds">&#8220;</span>bluetooth<span class="pl-pds">&#8220;</span></span>]).wait()&#8221; into &#8220;subprocess.Popen([<span class="pl-s"><span class="pl-pds">&#8220;</span>sudo<span class="pl-pds">&#8220;</span></span>, <span class="pl-s"><span class="pl-pds">&#8220;</span>systemctl<span class="pl-pds">&#8220;</span></span>, <span class="pl-s"><span class="pl-pds">&#8220;</span>restart<span class="pl-pds">&#8220;</span></span>, <span class="pl-s"><span class="pl-pds">&#8220;</span>bluetooth.target<span class="pl-pds">&#8220;</span></span>]).wait()&#8221;</p>
<p>Fix 3: Enable le (low energy) mode</p>
<p>Using the gatttool in interactive mode, like (replace address with yours):</p>
<pre><code>gatttool -i hci0 -b 20:C3:8F:E9:56:F1 -I</code></pre>
<p>would respond with the &#8220;[20:C3:8F:E9:56:F1][LE]&gt;&#8221; prompt. But the connect command would fail:</p>
<pre><code>[20:C3:8F:E9:56:F1][LE]&gt; connect
Attempting to connect to 20:C3:8F:E9:56:F1
Error: connect: Connection refused (111)</code></pre>
<p>In my case this could be solved by</p>
<pre><code>sudo btmgmt le on</code></pre>
<p>So for this to use from Python it is usefull to copy the &#8220;btmgmt&#8221; command to the /usr/local/bin directory too.</p>
<p>To be frank: Even after fiddling around with the Bluetooth utils it is still not quite clear to me what tool to choose from: hcitool, hciconfig, btmgmt, gatttool&#8230;</p>
<p>Anyway: With this installation you now should be able to run the python code i wrote which can be found at my <a href="https://github.com/keptenkurk/BS440">Github pages</a>.</p>
<p>Next post will zoom in the Python code and de BS440 connected scale specifics.</p>
<p>&nbsp;</p>
							</div><!-- .entry-content -->
	
			<div class="entry-utility">
									<span class="cat-links">
						<span class="entry-utility-prep entry-utility-prep-cat-links">Posted in</span> <a href="https://keptenkurk.wordpress.com/category/ble/" rel="category tag">BLE</a>					</span>
								
	<span class="meta-sep">|</span>
	<span class="tag-links">
		<span class="entry-utility-prep entry-utility-prep-tag-links">Tagged</span> <a href="https://keptenkurk.wordpress.com/tag/ble/" rel="tag">BLE</a>, <a href="https://keptenkurk.wordpress.com/tag/bluetooth/" rel="tag">bluetooth</a>, <a href="https://keptenkurk.wordpress.com/tag/bluez/" rel="tag">bluez</a>, <a href="https://keptenkurk.wordpress.com/tag/bs440/" rel="tag">BS440</a>, <a href="https://keptenkurk.wordpress.com/tag/gatttool/" rel="tag">gatttool</a>, <a href="https://keptenkurk.wordpress.com/tag/medisana/" rel="tag">Medisana</a>, <a href="https://keptenkurk.wordpress.com/tag/pygatt/" rel="tag">pygatt</a>, <a href="https://keptenkurk.wordpress.com/tag/python/" rel="tag">Python</a>	</span>

										<span class="meta-sep">|</span>
					<span class="comments-link"><a href="https://keptenkurk.wordpress.com/2016/03/26/connecting-the-medisana-bs440-bluetooth-scale-part-2/#comments">6 Comments</a></span>
											</div><!-- .entry-utility -->
		</div><!-- #post-## -->

		
	


			<div id="post-348" class="post-348 post type-post status-publish format-standard hentry category-ble tag-ble tag-bluetooth tag-bluez tag-bs440 tag-gatttool tag-medisana tag-pygatt tag-python">
							<h2 class="entry-title"><a href="https://keptenkurk.wordpress.com/2016/02/07/connecting-the-medisana-bs440-bluetooth-scale/" rel="bookmark">Connecting the Medisana BS440 Bluetooth scale (part&nbsp;1)</a></h2>			
			<div class="entry-meta">
									<span class="meta-prep meta-prep-author">Posted on</span> <a href="https://keptenkurk.wordpress.com/2016/02/07/connecting-the-medisana-bs440-bluetooth-scale/" title="19:44" rel="bookmark"><span class="entry-date">07/02/2016</span></a>					<span class="by-author"><span class="sep">by</span> <span class="author vcard"><a class="url fn n" href="https://keptenkurk.wordpress.com/author/keptenkurk/" title="View all posts by keptenkurk" rel="author">keptenkurk</a></span> </span>							</div><!-- .entry-meta -->

				<div class="entry-content">
				<p>About a year ago I bought the <a href="https://www.youtube.com/watch?v=C0GpWi2tmWQ">Medisana BS440 bathroom scale</a>. It measures not only weight but also the percentage of muscle, fat and water in your body. And it has Bluetooth! Although it comes with an Android/iOS app to upload data to Medisana&#8217;s VitaDock cloud (tough luck with my Windows Phone) I couldn&#8217;t resist the challenge to get the data off the scale  to a Raspberry Pi and handle the data the way I like (like sending an email to my wife when&#8230; No! Better don&#8217;t!)</p>
<div data-shortcode="caption" id="attachment_356" style="width: 949px" class="wp-caption alignnone"><img data-attachment-id="356" data-permalink="https://keptenkurk.wordpress.com/2016/02/07/connecting-the-medisana-bs440-bluetooth-scale/scaleproject/" data-orig-file="https://keptenkurk.files.wordpress.com/2016/02/scaleproject.jpg?w=640" data-orig-size="939,380" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="ScaleProject" data-image-description="" data-medium-file="https://keptenkurk.files.wordpress.com/2016/02/scaleproject.jpg?w=640?w=300" data-large-file="https://keptenkurk.files.wordpress.com/2016/02/scaleproject.jpg?w=640?w=640" class="alignnone size-full wp-image-356" src="https://keptenkurk.files.wordpress.com/2016/02/scaleproject.jpg?w=640" alt="ScaleProject" srcset="https://keptenkurk.files.wordpress.com/2016/02/scaleproject.jpg?w=640 640w, https://keptenkurk.files.wordpress.com/2016/02/scaleproject.jpg?w=150 150w, https://keptenkurk.files.wordpress.com/2016/02/scaleproject.jpg?w=300 300w, https://keptenkurk.files.wordpress.com/2016/02/scaleproject.jpg?w=768 768w, https://keptenkurk.files.wordpress.com/2016/02/scaleproject.jpg 939w" sizes="(max-width: 640px) 100vw, 640px"   /><p class="wp-caption-text">The goal for this project</p></div>
<p><span class="embed-youtube" style="text-align:center; display: block;"><iframe class='youtube-player' type='text/html' width='640' height='390' src='https://www.youtube.com/embed/2Px-D8Ye_u0?version=3&#038;rel=1&#038;fs=1&#038;autohide=2&#038;showsearch=0&#038;showinfo=1&#038;iv_load_policy=1&#038;wmode=transparent' allowfullscreen='true' style='border:0;'></iframe></span></p>
<p> <a href="https://keptenkurk.wordpress.com/2016/02/07/connecting-the-medisana-bs440-bluetooth-scale/#more-348" class="more-link">Continue reading <span class="meta-nav">&rarr;</span></a></p>
							</div><!-- .entry-content -->
	
			<div class="entry-utility">
									<span class="cat-links">
						<span class="entry-utility-prep entry-utility-prep-cat-links">Posted in</span> <a href="https://keptenkurk.wordpress.com/category/ble/" rel="category tag">BLE</a>					</span>
								
	<span class="meta-sep">|</span>
	<span class="tag-links">
		<span class="entry-utility-prep entry-utility-prep-tag-links">Tagged</span> <a href="https://keptenkurk.wordpress.com/tag/ble/" rel="tag">BLE</a>, <a href="https://keptenkurk.wordpress.com/tag/bluetooth/" rel="tag">bluetooth</a>, <a href="https://keptenkurk.wordpress.com/tag/bluez/" rel="tag">bluez</a>, <a href="https://keptenkurk.wordpress.com/tag/bs440/" rel="tag">BS440</a>, <a href="https://keptenkurk.wordpress.com/tag/gatttool/" rel="tag">gatttool</a>, <a href="https://keptenkurk.wordpress.com/tag/medisana/" rel="tag">Medisana</a>, <a href="https://keptenkurk.wordpress.com/tag/pygatt/" rel="tag">pygatt</a>, <a href="https://keptenkurk.wordpress.com/tag/python/" rel="tag">Python</a>	</span>

										<span class="meta-sep">|</span>
					<span class="comments-link"><a href="https://keptenkurk.wordpress.com/2016/02/07/connecting-the-medisana-bs440-bluetooth-scale/#comments">4 Comments</a></span>
											</div><!-- .entry-utility -->
		</div><!-- #post-## -->

		
	


			<div id="post-262" class="post-262 post type-post status-publish format-standard hentry category-wipy">
							<h2 class="entry-title"><a href="https://keptenkurk.wordpress.com/2015/11/05/the-wipy-python-on-a-wifi-enabled-microcontroller/" rel="bookmark">The WiPy: Python on a WiFi enabled&nbsp;microcontroller</a></h2>			
			<div class="entry-meta">
									<span class="meta-prep meta-prep-author">Posted on</span> <a href="https://keptenkurk.wordpress.com/2015/11/05/the-wipy-python-on-a-wifi-enabled-microcontroller/" title="22:11" rel="bookmark"><span class="entry-date">05/11/2015</span></a>					<span class="by-author"><span class="sep">by</span> <span class="author vcard"><a class="url fn n" href="https://keptenkurk.wordpress.com/author/keptenkurk/" title="View all posts by keptenkurk" rel="author">keptenkurk</a></span> </span>							</div><!-- .entry-meta -->

				<div class="entry-content">
				<p>While playing around with the ESP8266 i noticed the &#8220;highly experimental&#8221; MicroPython port for this board. How cool would that be: Running Python straight on a WiFi enabled microcontroller? Exploring this idea further i ended into a kickstarter project called: The WiPy. The project was well underway and had already reached its goal but was not shipping yet. Now this state is not uncommon at Kickstarter and sometimes lasts forever so i decided to wait some more.<br />
Then i found out that the development and production of the WiPy is carried out less than 5 miles from my home so i bravely wired €29. While the backers were enjoying their boards it took just a few weeks more for mine to arrive.</p>
<p>During this time i learned that there is a growing interest in MicroPython. The European Space Agency (ESA) <a href="http://forum.micropython.org/viewtopic.php?f=8&amp;t=744">funds further development</a> to investigate the use of MicroPython in payloads  and the BBC will launch the <a href="http://www.bbc.co.uk/mediacentre/mediapacks/microbit">micro:bit</a>, an initiative comparable to the Rasberry Pi, aimed at young tech pioneers. The micro:bit will run&#8230; yes: MicroPython. <a href="http://ntoll.org/article/story-micropython-on-microbit">This amusing story</a> tells how the pieces for the micro:bit came together</p>
<div data-shortcode="caption" id="attachment_265" style="width: 254px" class="wp-caption aligncenter"><a href="https://keptenkurk.files.wordpress.com/2015/11/thewipy.jpg"><img data-attachment-id="265" data-permalink="https://keptenkurk.wordpress.com/2015/11/05/the-wipy-python-on-a-wifi-enabled-microcontroller/thewipy/" data-orig-file="https://keptenkurk.files.wordpress.com/2015/11/thewipy.jpg?w=244&#038;h=392" data-orig-size="717,1151" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="TheWiPy" data-image-description="" data-medium-file="https://keptenkurk.files.wordpress.com/2015/11/thewipy.jpg?w=244&#038;h=392?w=187" data-large-file="https://keptenkurk.files.wordpress.com/2015/11/thewipy.jpg?w=244&#038;h=392?w=638" class=" wp-image-265" src="https://keptenkurk.files.wordpress.com/2015/11/thewipy.jpg?w=244&#038;h=392" alt="Meet The WiPy" width="244" height="392" srcset="https://keptenkurk.files.wordpress.com/2015/11/thewipy.jpg?w=244&amp;h=392 244w, https://keptenkurk.files.wordpress.com/2015/11/thewipy.jpg?w=488&amp;h=784 488w, https://keptenkurk.files.wordpress.com/2015/11/thewipy.jpg?w=93&amp;h=150 93w, https://keptenkurk.files.wordpress.com/2015/11/thewipy.jpg?w=187&amp;h=300 187w" sizes="(max-width: 244px) 100vw, 244px" /></a><p class="wp-caption-text">Meet The WiPy</p></div>
<p>Finally i have some time to start playing with the WiPy. First thing is to get 3.3V to supply the thing. An easy task for the newly aquired breadboard power supply. Although the input voltage is rated between 6V and 12V DC the supply dies with a loud *bang* rocketing the capacitor when 12V from a wall plug supply is connected&#8230;</p>
<div data-shortcode="caption" id="attachment_263" style="width: 444px" class="wp-caption aligncenter"><a href="https://keptenkurk.files.wordpress.com/2015/11/exploded-capacitor.jpg"><img data-attachment-id="263" data-permalink="https://keptenkurk.wordpress.com/2015/11/05/the-wipy-python-on-a-wifi-enabled-microcontroller/exploded-capacitor/" data-orig-file="https://keptenkurk.files.wordpress.com/2015/11/exploded-capacitor.jpg?w=434&#038;h=321" data-orig-size="1240,917" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="Exploded capacitor" data-image-description="" data-medium-file="https://keptenkurk.files.wordpress.com/2015/11/exploded-capacitor.jpg?w=434&#038;h=321?w=300" data-large-file="https://keptenkurk.files.wordpress.com/2015/11/exploded-capacitor.jpg?w=434&#038;h=321?w=640" class="wp-image-263" src="https://keptenkurk.files.wordpress.com/2015/11/exploded-capacitor.jpg?w=434&#038;h=321" alt="" width="434" height="321" srcset="https://keptenkurk.files.wordpress.com/2015/11/exploded-capacitor.jpg?w=434&amp;h=321 434w, https://keptenkurk.files.wordpress.com/2015/11/exploded-capacitor.jpg?w=868&amp;h=642 868w, https://keptenkurk.files.wordpress.com/2015/11/exploded-capacitor.jpg?w=150&amp;h=111 150w, https://keptenkurk.files.wordpress.com/2015/11/exploded-capacitor.jpg?w=300&amp;h=222 300w, https://keptenkurk.files.wordpress.com/2015/11/exploded-capacitor.jpg?w=768&amp;h=568 768w" sizes="(max-width: 434px) 100vw, 434px" /></a><p class="wp-caption-text">Exploded capacitor</p></div>
<p>The second attempt uses the FTDI USB interface i also used for the ESP8266 modules. The 3V3 output can just supply those units when a large 100uF capacitor is used to buffer the supply to cope with peak currents. However the WiPy is not satisfied with that. The red led flashes rapidly and no WiFi AP can be detected.</p>
<p>The final attempt requires me to go upstairs and get the adjustable power supply. At 6 volts (drawing 100mA) the spare breadboard supply does much better and the LED on the WiPy now flashes once every 4 seconds.</p>
<p>On the laptop a network with SSID &#8220;wipy-wlan&#8211;7ef8&#8221; pops up and password &#8220;www.wipy.io&#8221; works to connect to it. Finally a telnet with <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">Putty</a>  prompts the login for the WiPy. User &#8220;micro&#8221; and password &#8220;python&#8221; gets me to the &gt;&gt;&gt; python prompt. Yeah!</p>
<div data-shortcode="caption" id="attachment_264" style="width: 650px" class="wp-caption alignnone"><a href="https://keptenkurk.files.wordpress.com/2015/11/wipy-on-breadboard.jpg"><img data-attachment-id="264" data-permalink="https://keptenkurk.wordpress.com/2015/11/05/the-wipy-python-on-a-wifi-enabled-microcontroller/wipy-on-breadboard/" data-orig-file="https://keptenkurk.files.wordpress.com/2015/11/wipy-on-breadboard.jpg?w=640&#038;h=359" data-orig-size="1632,916" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="WiPy on breadboard" data-image-description="" data-medium-file="https://keptenkurk.files.wordpress.com/2015/11/wipy-on-breadboard.jpg?w=640&#038;h=359?w=300" data-large-file="https://keptenkurk.files.wordpress.com/2015/11/wipy-on-breadboard.jpg?w=640&#038;h=359?w=640" class="size-full wp-image-264" src="https://keptenkurk.files.wordpress.com/2015/11/wipy-on-breadboard.jpg?w=640&#038;h=359" alt="The WiPy ont the breadboard" width="640" height="359" srcset="https://keptenkurk.files.wordpress.com/2015/11/wipy-on-breadboard.jpg?w=640&amp;h=359 640w, https://keptenkurk.files.wordpress.com/2015/11/wipy-on-breadboard.jpg?w=1280&amp;h=718 1280w, https://keptenkurk.files.wordpress.com/2015/11/wipy-on-breadboard.jpg?w=150&amp;h=84 150w, https://keptenkurk.files.wordpress.com/2015/11/wipy-on-breadboard.jpg?w=300&amp;h=168 300w, https://keptenkurk.files.wordpress.com/2015/11/wipy-on-breadboard.jpg?w=768&amp;h=431 768w, https://keptenkurk.files.wordpress.com/2015/11/wipy-on-breadboard.jpg?w=1024&amp;h=575 1024w" sizes="(max-width: 640px) 100vw, 640px" /></a><p class="wp-caption-text">The WiPy on the breadboard</p></div>
<p>Now it shows that the unit uses V1.0 firmware which can be upgraded OTA (over the air). This requires a FTP client like <a href="https://filezilla-project.org/download.php">FileZilla</a> or alike. Before trying to connect make sure to configure FileZilla as the <a href="http://micropython.org/resources/docs/en/latest/wipy/wipy/general.html">general docs</a> tell and use the same credentials as used for telnet access.</p>
<p><code>Do not use the quick connect button, instead, open the site manager and create a new configuration. In the <code class="docutils literal"><span class="pre">General</span></code> tab make sure that encryption is set to: <code class="docutils literal"><span class="pre">Only</span> <span class="pre">use</span> <span class="pre">plain</span> <span class="pre">FTP</span> <span class="pre">(insecure)</span></code>. In the Transfer Settings tab limit the max number of connections to one, otherwise FileZilla will try to open a second command connection when retrieving and saving files, and for simplicity and to reduce code size, only one command and one data connections are possible. Other FTP clients might behave in a similar way.</code></p>
<p>Download version 1.5 from <a href="http://micropython.org/download/">micropython.org</a> (scroll to &#8220;Firmware for the WiPy&#8221;) and extract the &#8220;mcuimg.bin&#8221; from the zipfile and ftp it into the /flash/sys folder on the WiPy. After a reset the unit now runs version 1.5.</p>
<p><code>MicroPython v1.5-1-ge954604 on 2015-10-21; WiPy with CC3200<br />
Type "help()" for more information.<br />
&gt;&gt;&gt;</code></p>
<p>and the examples run smooth:</p>
<p><code>&gt;&gt;&gt; from machine import Pin<br />
&gt;&gt;&gt; import wipy<br />
&gt;&gt;&gt; wipy.heartbeat(False) # disable the heartbeat<br />
&gt;&gt;&gt; led = Pin('GP25', mode=Pin.OUT)<br />
&gt;&gt;&gt; led(1)<br />
&gt;&gt;&gt; led(0)<br />
&gt;&gt;&gt; led.toggle()</code></p>
<p>It&#8217;s about 23:00 now and my wife fell asleep on the couch so why not try to get the console working over the UART interface?  The FTDI equipped USB interface should do the job. First some magic commands need to be entered on the telnet prompt:</p>
<p><code>&gt;&gt;&gt; from machine import UART<br />
&gt;&gt;&gt; import os<br />
&gt;&gt;&gt; uart = UART(0, 115200)<br />
&gt;&gt;&gt; os.dupterm(uart)</code></p>
<p>The pinout of the WiPy is not really clear to me at this stage. Pins can be used for different purposes but what the numbers in brackets mean?</p>
<div data-shortcode="caption" id="attachment_268" style="width: 650px" class="wp-caption alignnone"><a href="https://keptenkurk.files.wordpress.com/2015/11/pinout.png"><img data-attachment-id="268" data-permalink="https://keptenkurk.wordpress.com/2015/11/05/the-wipy-python-on-a-wifi-enabled-microcontroller/pinout/" data-orig-file="https://keptenkurk.files.wordpress.com/2015/11/pinout.png?w=640&#038;h=287" data-orig-size="1405,629" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="PinOUT" data-image-description="" data-medium-file="https://keptenkurk.files.wordpress.com/2015/11/pinout.png?w=640&#038;h=287?w=300" data-large-file="https://keptenkurk.files.wordpress.com/2015/11/pinout.png?w=640&#038;h=287?w=640" class="size-full wp-image-268" src="https://keptenkurk.files.wordpress.com/2015/11/pinout.png?w=640&#038;h=287" alt="WiPy pinout" width="640" height="287" srcset="https://keptenkurk.files.wordpress.com/2015/11/pinout.png?w=640&amp;h=287 640w, https://keptenkurk.files.wordpress.com/2015/11/pinout.png?w=1280&amp;h=574 1280w, https://keptenkurk.files.wordpress.com/2015/11/pinout.png?w=150&amp;h=67 150w, https://keptenkurk.files.wordpress.com/2015/11/pinout.png?w=300&amp;h=134 300w, https://keptenkurk.files.wordpress.com/2015/11/pinout.png?w=768&amp;h=344 768w, https://keptenkurk.files.wordpress.com/2015/11/pinout.png?w=1024&amp;h=458 1024w" sizes="(max-width: 640px) 100vw, 640px" /></a><p class="wp-caption-text">WiPy pinout</p></div>
<p>At first i try to use GP30 (UART0_TX(9)) and GP31 (UART0_RX(9)) as TX and RX without luck. However after investigating the schematics of the <a href="https://github.com/wipy/wipy/tree/master/hardware/ExpansionBoard-v1.2">Expansion Board</a> it looks like UART0_TX(3) en  UART0_RX(3) or pin GP2 and GP1 should be used instead.  So after connecting  GP2&#8211;&gt;FTDI TX  en GP1 &#8211;&gt; FTDI RX i can use putty through the serial port to get the prompt too. Connecting RTX/CTS for flow control is not needed. To have this feature enabled at startup the 4 lines have been added to the boot.py file which is run at startup. My wife slowly wakes up from my jumps for joy so time to finish for tonight.</p>
<p>Next to try is getting the WiPy to connect to my home WiFi as client. Can&#8217;t wait!</p>
<p>&nbsp;</p>
							</div><!-- .entry-content -->
	
			<div class="entry-utility">
									<span class="cat-links">
						<span class="entry-utility-prep entry-utility-prep-cat-links">Posted in</span> <a href="https://keptenkurk.wordpress.com/category/wipy/" rel="category tag">WiPy</a>					</span>
																	<span class="meta-sep">|</span>
					<span class="comments-link"><a href="https://keptenkurk.wordpress.com/2015/11/05/the-wipy-python-on-a-wifi-enabled-microcontroller/#respond">Leave a comment</a></span>
											</div><!-- .entry-utility -->
		</div><!-- #post-## -->

		
	


			<div id="post-245" class="post-245 post type-post status-publish format-standard hentry category-ads-b">
							<h2 class="entry-title"><a href="https://keptenkurk.wordpress.com/2015/08/29/ads-b-receiving-station-description/" rel="bookmark">ADS-B Receiving station&nbsp;description</a></h2>			
			<div class="entry-meta">
									<span class="meta-prep meta-prep-author">Posted on</span> <a href="https://keptenkurk.wordpress.com/2015/08/29/ads-b-receiving-station-description/" title="23:52" rel="bookmark"><span class="entry-date">29/08/2015</span></a>					<span class="by-author"><span class="sep">by</span> <span class="author vcard"><a class="url fn n" href="https://keptenkurk.wordpress.com/author/keptenkurk/" title="View all posts by keptenkurk" rel="author">keptenkurk</a></span> </span>							</div><!-- .entry-meta -->

				<div class="entry-content">
				<p>This post decribes  the ADS-B receiver station as it is <a href="https://flightaware.com/adsb/stats/user/paulmerkx#stats-2508">feeding FlightAware</a> for some time now. I&#8217;ll try to descibe the components in detail.</p>
<h2>Location</h2>
<p>Location is all. With the top 4 of Europe&#8217;s busiest airports at or within 200 nm (and 7 of Europe&#8217;s top 20) the airspace around Eindhoven is busy. And with the Netherlands being flat there is plenty horizon.</p>
<h2>Antenna</h2>
<p>The antenna is a homemade collinear from <a href="https://keptenkurk.wordpress.com/2014/11/04/ads-b-collinear-antenna/" target="_blank">this</a> previous post. It consists of 8 elements and is open ended. I must have been lucky because a second 16 element version i built performed far worse. At some time i moved the antenna 2 meters up which improved overall statistics by 5%. Attached to the steel post is a 2m PVC tubing mast which gently moves in the wind at about 12m over ground.</p>
<div data-shortcode="caption" id="attachment_250" style="width: 583px" class="wp-caption aligncenter"><a href="https://keptenkurk.files.wordpress.com/2015/08/p1090577.jpg"><img data-attachment-id="250" data-permalink="https://keptenkurk.wordpress.com/2015/08/29/ads-b-receiving-station-description/p1090577/" data-orig-file="https://keptenkurk.files.wordpress.com/2015/08/p1090577.jpg" data-orig-size="4000,3000" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;2.8&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;DMC-FS10&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1440794538&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;5&quot;,&quot;iso&quot;:&quot;80&quot;,&quot;shutter_speed&quot;:&quot;0.033333333333333&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="P1090577" data-image-description="" data-medium-file="https://keptenkurk.files.wordpress.com/2015/08/p1090577.jpg?w=573&#038;h=430" data-large-file="https://keptenkurk.files.wordpress.com/2015/08/p1090577.jpg?w=640" class=" wp-image-250" src="https://keptenkurk.files.wordpress.com/2015/08/p1090577.jpg?w=573&#038;h=430" alt="Antenna at rooftop" width="573" height="430" srcset="https://keptenkurk.files.wordpress.com/2015/08/p1090577.jpg?w=573&amp;h=430 573w, https://keptenkurk.files.wordpress.com/2015/08/p1090577.jpg?w=1146&amp;h=860 1146w, https://keptenkurk.files.wordpress.com/2015/08/p1090577.jpg?w=150&amp;h=113 150w, https://keptenkurk.files.wordpress.com/2015/08/p1090577.jpg?w=300&amp;h=225 300w, https://keptenkurk.files.wordpress.com/2015/08/p1090577.jpg?w=768&amp;h=576 768w, https://keptenkurk.files.wordpress.com/2015/08/p1090577.jpg?w=1024&amp;h=768 1024w" sizes="(max-width: 573px) 100vw, 573px" /></a><p class="wp-caption-text">Antenna at rooftop</p></div>
<p>To the east a row of large trees along the street obscure the horizon. The effect on the statistics is especially noticable at rainy periods (-10%..-20%) or in spring when fresh leaves appear (in the picture on the left with the antenna at its old lower postition)</p>
<div data-shortcode="caption" id="attachment_187" style="width: 591px" class="wp-caption aligncenter"><a href="https://keptenkurk.files.wordpress.com/2014/11/e3351279-9274-40e8-96b8-d78af9aa9d2a.jpg"><img data-attachment-id="187" data-permalink="https://keptenkurk.wordpress.com/2014/11/13/ads-b-performance-upgrade/e3351279-9274-40e8-96b8-d78af9aa9d2a/" data-orig-file="https://keptenkurk.files.wordpress.com/2014/11/e3351279-9274-40e8-96b8-d78af9aa9d2a.jpg" data-orig-size="1224,452" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="e3351279-9274-40e8-96b8-d78af9aa9d2a" data-image-description="" data-medium-file="https://keptenkurk.files.wordpress.com/2014/11/e3351279-9274-40e8-96b8-d78af9aa9d2a.jpg?w=581&#038;h=215" data-large-file="https://keptenkurk.files.wordpress.com/2014/11/e3351279-9274-40e8-96b8-d78af9aa9d2a.jpg?w=640" class=" wp-image-187" src="https://keptenkurk.files.wordpress.com/2014/11/e3351279-9274-40e8-96b8-d78af9aa9d2a.jpg?w=581&#038;h=215" alt="Pnoramo to the south-east" width="581" height="215" srcset="https://keptenkurk.files.wordpress.com/2014/11/e3351279-9274-40e8-96b8-d78af9aa9d2a.jpg?w=581&amp;h=215 581w, https://keptenkurk.files.wordpress.com/2014/11/e3351279-9274-40e8-96b8-d78af9aa9d2a.jpg?w=1162&amp;h=430 1162w, https://keptenkurk.files.wordpress.com/2014/11/e3351279-9274-40e8-96b8-d78af9aa9d2a.jpg?w=150&amp;h=55 150w, https://keptenkurk.files.wordpress.com/2014/11/e3351279-9274-40e8-96b8-d78af9aa9d2a.jpg?w=300&amp;h=111 300w, https://keptenkurk.files.wordpress.com/2014/11/e3351279-9274-40e8-96b8-d78af9aa9d2a.jpg?w=768&amp;h=284 768w, https://keptenkurk.files.wordpress.com/2014/11/e3351279-9274-40e8-96b8-d78af9aa9d2a.jpg?w=1024&amp;h=378 1024w" sizes="(max-width: 581px) 100vw, 581px" /></a><p class="wp-caption-text">Pnoramo to the south-east</p></div>
<h2>Feeding cable</h2>
<p>The feeding cable didn&#8217;t need to be very long (3 m) as the equipment is stored in the attic right under the roof. Just a single hole did the job. I use quite rigid SAT TV cable (Hirshmann KOKA799). Most of the equipment is hidden to improve the WAF.</p>
<div data-shortcode="caption" id="attachment_251" style="width: 658px" class="wp-caption aligncenter"><a href="https://keptenkurk.files.wordpress.com/2015/08/p1090584.jpg"><img data-attachment-id="251" data-permalink="https://keptenkurk.wordpress.com/2015/08/29/ads-b-receiving-station-description/p1090584/" data-orig-file="https://keptenkurk.files.wordpress.com/2015/08/p1090584.jpg" data-orig-size="4000,3000" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;2.8&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;DMC-FS10&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1440794806&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;5&quot;,&quot;iso&quot;:&quot;250&quot;,&quot;shutter_speed&quot;:&quot;0.125&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="P1090584" data-image-description="" data-medium-file="https://keptenkurk.files.wordpress.com/2015/08/p1090584.jpg?w=648&#038;h=486" data-large-file="https://keptenkurk.files.wordpress.com/2015/08/p1090584.jpg?w=640" class=" wp-image-251" src="https://keptenkurk.files.wordpress.com/2015/08/p1090584.jpg?w=648&#038;h=486" alt="The receiver " width="648" height="486" srcset="https://keptenkurk.files.wordpress.com/2015/08/p1090584.jpg?w=648&amp;h=486 648w, https://keptenkurk.files.wordpress.com/2015/08/p1090584.jpg?w=1296&amp;h=972 1296w, https://keptenkurk.files.wordpress.com/2015/08/p1090584.jpg?w=150&amp;h=113 150w, https://keptenkurk.files.wordpress.com/2015/08/p1090584.jpg?w=300&amp;h=225 300w, https://keptenkurk.files.wordpress.com/2015/08/p1090584.jpg?w=768&amp;h=576 768w, https://keptenkurk.files.wordpress.com/2015/08/p1090584.jpg?w=1024&amp;h=768 1024w" sizes="(max-width: 648px) 100vw, 648px" /></a><p class="wp-caption-text">The receiver</p></div>
<div data-shortcode="caption" id="attachment_252" style="width: 517px" class="wp-caption aligncenter"><a href="https://keptenkurk.files.wordpress.com/2015/08/p1090585.jpg"><img data-attachment-id="252" data-permalink="https://keptenkurk.wordpress.com/2015/08/29/ads-b-receiving-station-description/p1090585/" data-orig-file="https://keptenkurk.files.wordpress.com/2015/08/p1090585.jpg" data-orig-size="3000,4000" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;2.8&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;DMC-FS10&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1440794879&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;5&quot;,&quot;iso&quot;:&quot;200&quot;,&quot;shutter_speed&quot;:&quot;0.033333333333333&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="P1090585" data-image-description="" data-medium-file="https://keptenkurk.files.wordpress.com/2015/08/p1090585.jpg?w=507&#038;h=676" data-large-file="https://keptenkurk.files.wordpress.com/2015/08/p1090585.jpg?w=640" class=" wp-image-252" src="https://keptenkurk.files.wordpress.com/2015/08/p1090585.jpg?w=507&#038;h=676" alt="Well hidden" width="507" height="676" srcset="https://keptenkurk.files.wordpress.com/2015/08/p1090585.jpg?w=507&amp;h=676 507w, https://keptenkurk.files.wordpress.com/2015/08/p1090585.jpg?w=1014&amp;h=1352 1014w, https://keptenkurk.files.wordpress.com/2015/08/p1090585.jpg?w=113&amp;h=150 113w, https://keptenkurk.files.wordpress.com/2015/08/p1090585.jpg?w=225&amp;h=300 225w, https://keptenkurk.files.wordpress.com/2015/08/p1090585.jpg?w=768&amp;h=1024 768w" sizes="(max-width: 507px) 100vw, 507px" /></a><p class="wp-caption-text">Well hidden</p></div>
<h2>Preamplifier</h2>
<p>The preamp is of <a href="http://www.g4ddk.com/G4DDKVLNA2B3.pdf">G4DDK</a> design. High gain and  a very low noise figure. Since the first stage mostly determines the overall noise figure  of the system as a whole i wanted a real good preamp. The noise figure is measured at 0.4 dB and gain is 35 dB. It handles the nearby cellphone signals at 940 MHz very well. The high gain made me reduce the dongle gain to 20 dB.</p>
<h2>Filter</h2>
<p>To protect the poor SDR dongle from the cellphone tower at 940 MHz i designed a filter <a href="https://keptenkurk.wordpress.com/2014/11/05/a-homebrew-1090mhz-ads-b-filter/">described here</a>. Meanwhile it has been reproduced by others with success. Tuned to best ADS-B results it is probably tuned for &#8220;maximum smoke&#8221; and very narrow but luckily this is no problem since all ADS-B signals use the same frequency.</p>
<div data-shortcode="caption" id="attachment_255" style="width: 608px" class="wp-caption alignnone"><a href="https://keptenkurk.files.wordpress.com/2015/08/filter-response-corrected.png"><img data-attachment-id="255" data-permalink="https://keptenkurk.wordpress.com/2015/08/29/ads-b-receiving-station-description/filter-response-corrected/" data-orig-file="https://keptenkurk.files.wordpress.com/2015/08/filter-response-corrected.png" data-orig-size="800,450" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="filter response corrected" data-image-description="" data-medium-file="https://keptenkurk.files.wordpress.com/2015/08/filter-response-corrected.png?w=598&#038;h=337" data-large-file="https://keptenkurk.files.wordpress.com/2015/08/filter-response-corrected.png?w=640" class=" wp-image-255" src="https://keptenkurk.files.wordpress.com/2015/08/filter-response-corrected.png?w=598&#038;h=337" alt="Filter response measured with BG7 wideband noise generator" width="598" height="337" srcset="https://keptenkurk.files.wordpress.com/2015/08/filter-response-corrected.png?w=598&amp;h=337 598w, https://keptenkurk.files.wordpress.com/2015/08/filter-response-corrected.png?w=150&amp;h=84 150w, https://keptenkurk.files.wordpress.com/2015/08/filter-response-corrected.png?w=300&amp;h=169 300w, https://keptenkurk.files.wordpress.com/2015/08/filter-response-corrected.png?w=768&amp;h=432 768w, https://keptenkurk.files.wordpress.com/2015/08/filter-response-corrected.png 800w" sizes="(max-width: 598px) 100vw, 598px" /></a><p class="wp-caption-text">Filter response measured with BG7 wideband noise generator</p></div>
<h2>Dongle</h2>
<p>With this setup i couldn&#8217;t see the difference between the R820T dongle and the R820T2 types. Running without preamp or filter this difference was bigger and the R820T2 performs better. At some time the system was very sensitive to moving things around. Then i discovered that the middle pin of a cheap MXC to BNC adapter had broken and was stuck in the dongle. So i decided to solder the pigtail right onto the board of the dongle.</p>
<h2>Raspberry Pi2</h2>
<p>The FA MLAT needs to run on the same Pi as dump1090 and both need quite some cpu when 250 aircraft are heard. Therfore i had to migrate to a Pi2 which i gave the same MAC address as the Pi B to continue the streak at FlightAware.</p>
<h2>Test setup</h2>
<p>For testing purposes a second antenna (currently a logperiodic beam) and dongle with Pi B are used. This Pi also acts as a geofencing alert for a friend. If aircraft get too close to his home a Python script wil send him an email alert with the track of the offender in gpx format.</p>
<div data-shortcode="caption" id="attachment_253" style="width: 645px" class="wp-caption alignnone"><a href="https://keptenkurk.files.wordpress.com/2015/08/p1090586.jpg"><img data-attachment-id="253" data-permalink="https://keptenkurk.wordpress.com/2015/08/29/ads-b-receiving-station-description/p1090586/" data-orig-file="https://keptenkurk.files.wordpress.com/2015/08/p1090586.jpg" data-orig-size="4000,3000" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;2.8&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;DMC-FS10&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1440794926&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;5&quot;,&quot;iso&quot;:&quot;320&quot;,&quot;shutter_speed&quot;:&quot;0.033333333333333&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="P1090586" data-image-description="" data-medium-file="https://keptenkurk.files.wordpress.com/2015/08/p1090586.jpg?w=635&#038;h=476" data-large-file="https://keptenkurk.files.wordpress.com/2015/08/p1090586.jpg?w=640" class=" wp-image-253" src="https://keptenkurk.files.wordpress.com/2015/08/p1090586.jpg?w=635&#038;h=476" alt="Test receiver" width="635" height="476" srcset="https://keptenkurk.files.wordpress.com/2015/08/p1090586.jpg?w=635&amp;h=476 635w, https://keptenkurk.files.wordpress.com/2015/08/p1090586.jpg?w=1270&amp;h=952 1270w, https://keptenkurk.files.wordpress.com/2015/08/p1090586.jpg?w=150&amp;h=113 150w, https://keptenkurk.files.wordpress.com/2015/08/p1090586.jpg?w=300&amp;h=225 300w, https://keptenkurk.files.wordpress.com/2015/08/p1090586.jpg?w=768&amp;h=576 768w, https://keptenkurk.files.wordpress.com/2015/08/p1090586.jpg?w=1024&amp;h=768 1024w" sizes="(max-width: 635px) 100vw, 635px" /></a><p class="wp-caption-text">Test receiver</p></div>
<h2>Monitoring</h2>
<p>A third Raspberry Pi runs collectd and receives the data from the main Pi and test Pi over the network. In fact this third Pi was a leftover from the MLAT proof of concept by Oliver Jowett. Now the main Pi is more powerfull it could as well handle the collectd stuff, but i left it as it was.</p>
<p>Also a small PC with Virtual Radar Server / Teamviewer is used to log tracks and have an occasional peek. It also enables remote access to the Pi&#8217;s.</p>
<h2>Future plans</h2>
<p>The collectd graphs show that when things are not so busy (from midnight till 5 in the morning, less than 100 aircraft seen) the percentage of received positions and the maximum distance increase. This leads to the thought that by dividing the antenna pattern in 4 areas and feed them to 4 separate receivers on a single Pi2 overall performance would increase.<br />
<div data-shortcode="caption" id="attachment_256" style="width: 618px" class="wp-caption aligncenter"><a href="https://keptenkurk.files.wordpress.com/2015/08/dump1090-dump1090main-acs-24h.png"><img data-attachment-id="256" data-permalink="https://keptenkurk.wordpress.com/2015/08/29/ads-b-receiving-station-description/dump1090-dump1090main-acs-24h-2/" data-orig-file="https://keptenkurk.files.wordpress.com/2015/08/dump1090-dump1090main-acs-24h.png" data-orig-size="577,287" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;0&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;0&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;0&quot;,&quot;iso&quot;:&quot;0&quot;,&quot;shutter_speed&quot;:&quot;0&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;0&quot;}" data-image-title="dump1090-dump1090main-acs-24h" data-image-description="" data-medium-file="https://keptenkurk.files.wordpress.com/2015/08/dump1090-dump1090main-acs-24h.png?w=608&#038;h=302" data-large-file="https://keptenkurk.files.wordpress.com/2015/08/dump1090-dump1090main-acs-24h.png?w=577" class=" wp-image-256" src="https://keptenkurk.files.wordpress.com/2015/08/dump1090-dump1090main-acs-24h.png?w=608&#038;h=302" alt="Percentage positions drops as number of messages raises" width="608" height="302" srcset="https://keptenkurk.files.wordpress.com/2015/08/dump1090-dump1090main-acs-24h.png 577w, https://keptenkurk.files.wordpress.com/2015/08/dump1090-dump1090main-acs-24h.png?w=150&amp;h=75 150w, https://keptenkurk.files.wordpress.com/2015/08/dump1090-dump1090main-acs-24h.png?w=300&amp;h=149 300w" sizes="(max-width: 608px) 100vw, 608px" /></a><p class="wp-caption-text">Percentage positions drops as number of aircraft seen raises</p></div></p>
<p>The antenna in mind consists of 4 stacked Biquad antennas from <a href="http://www.datv-agaf.de/T_ATV/Hybrid-Double-Quad-Array-GB.pdf">these pages</a> but stacked vertically. Each receiver would get its own stack and be placed in the 4 major directions. (a total of 16 biquad antenna&#8217;s, 4 preamps, 4 dongles and 1 Pi2). A single biquad has been built and that one worked surprisingly well.</p>
<div data-shortcode="caption" id="attachment_229" style="width: 599px" class="wp-caption aligncenter"><a href="https://keptenkurk.files.wordpress.com/2015/02/p1080445.jpg"><img data-attachment-id="229" data-permalink="https://keptenkurk.wordpress.com/2015/08/29/ads-b-receiving-station-description/p1080445/" data-orig-file="https://keptenkurk.files.wordpress.com/2015/02/p1080445.jpg" data-orig-size="448,336" data-comments-opened="1" data-image-meta="{&quot;aperture&quot;:&quot;2.8&quot;,&quot;credit&quot;:&quot;&quot;,&quot;camera&quot;:&quot;DMC-FS10&quot;,&quot;caption&quot;:&quot;&quot;,&quot;created_timestamp&quot;:&quot;1424016568&quot;,&quot;copyright&quot;:&quot;&quot;,&quot;focal_length&quot;:&quot;5&quot;,&quot;iso&quot;:&quot;80&quot;,&quot;shutter_speed&quot;:&quot;0.00125&quot;,&quot;title&quot;:&quot;&quot;,&quot;orientation&quot;:&quot;1&quot;}" data-image-title="P1080445" data-image-description="" data-medium-file="https://keptenkurk.files.wordpress.com/2015/02/p1080445.jpg?w=589&#038;h=442" data-large-file="https://keptenkurk.files.wordpress.com/2015/02/p1080445.jpg?w=448" class=" wp-image-229" src="https://keptenkurk.files.wordpress.com/2015/02/p1080445.jpg?w=589&#038;h=442" alt="Single biquad antenna" width="589" height="442" srcset="https://keptenkurk.files.wordpress.com/2015/02/p1080445.jpg 448w, https://keptenkurk.files.wordpress.com/2015/02/p1080445.jpg?w=150&amp;h=113 150w, https://keptenkurk.files.wordpress.com/2015/02/p1080445.jpg?w=300&amp;h=225 300w" sizes="(max-width: 589px) 100vw, 589px" /></a><p class="wp-caption-text">Single biquad antenna</p></div>
<p>However, never had it on the roof to check the directivity yet.</p>
							</div><!-- .entry-content -->
	
			<div class="entry-utility">
									<span class="cat-links">
						<span class="entry-utility-prep entry-utility-prep-cat-links">Posted in</span> <a href="https://keptenkurk.wordpress.com/category/ads-b/" rel="category tag">ADS-B</a>					</span>
																	<span class="meta-sep">|</span>
					<span class="comments-link"><a href="https://keptenkurk.wordpress.com/2015/08/29/ads-b-receiving-station-description/#respond">Leave a comment</a></span>
											</div><!-- .entry-utility -->
		</div><!-- #post-## -->

		
	

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="https://keptenkurk.wordpress.com/page/2/" ><span class="meta-nav">&larr;</span> Older posts</a></div>
					<div class="nav-next"></div>
				</div><!-- #nav-below -->
			</div><!-- #content -->
		</div><!-- #container -->


		<div id="primary" class="widget-area" role="complementary">
						<ul class="xoxo">

<li id="search-5" class="widget-container widget_search"><h3 class="widget-title">Search</h3><form role="search" method="get" id="searchform" class="searchform" action="https://keptenkurk.wordpress.com/">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input type="text" value="" name="s" id="s" />
					<input type="submit" id="searchsubmit" value="Search" />
				</div>
			</form></li>		<li id="recent-posts-5" class="widget-container widget_recent_entries">		<h3 class="widget-title">Recent posts</h3>		<ul>
					<li>
				<a href="https://keptenkurk.wordpress.com/2016/03/30/connecting-the-medisana-bs440-bluetooth-scale-part-5/">Connecting the Medisana BS440 Bluetooth scale (part&nbsp;5)</a>
							<span class="post-date">30/03/2016</span>
						</li>
					<li>
				<a href="https://keptenkurk.wordpress.com/2016/03/26/connecting-the-medisana-bs440-bluetooth-scale-part-4/">Connecting the Medisana BS440 Bluetooth scale (part&nbsp;4)</a>
							<span class="post-date">26/03/2016</span>
						</li>
					<li>
				<a href="https://keptenkurk.wordpress.com/2016/03/26/connecting-the-medisana-bs440-bluetooth-scale-part-3/">Connecting the Medisana BS440 Bluetooth scale (part&nbsp;3)</a>
							<span class="post-date">26/03/2016</span>
						</li>
					<li>
				<a href="https://keptenkurk.wordpress.com/2016/03/26/connecting-the-medisana-bs440-bluetooth-scale-part-2/">Connecting the Medisana BS440 Bluetooth scale (part&nbsp;2)</a>
							<span class="post-date">26/03/2016</span>
						</li>
					<li>
				<a href="https://keptenkurk.wordpress.com/2016/02/07/connecting-the-medisana-bs440-bluetooth-scale/">Connecting the Medisana BS440 Bluetooth scale (part&nbsp;1)</a>
							<span class="post-date">07/02/2016</span>
						</li>
					<li>
				<a href="https://keptenkurk.wordpress.com/2015/11/05/the-wipy-python-on-a-wifi-enabled-microcontroller/">The WiPy: Python on a WiFi enabled&nbsp;microcontroller</a>
							<span class="post-date">05/11/2015</span>
						</li>
					<li>
				<a href="https://keptenkurk.wordpress.com/2015/08/29/ads-b-receiving-station-description/">ADS-B Receiving station&nbsp;description</a>
							<span class="post-date">29/08/2015</span>
						</li>
					<li>
				<a href="https://keptenkurk.wordpress.com/2015/08/28/using-collectd-with-multiple-networked-instances/">Using collectd with multiple networked&nbsp;instances</a>
							<span class="post-date">28/08/2015</span>
						</li>
					<li>
				<a href="https://keptenkurk.wordpress.com/2015/01/21/esp8266-first-steps/">ESP8266 first steps</a>
							<span class="post-date">21/01/2015</span>
						</li>
					<li>
				<a href="https://keptenkurk.wordpress.com/2015/01/04/preparing-copper-wire-for-antennas/">Preparing copper wire for&nbsp;antenna&#8217;s</a>
							<span class="post-date">04/01/2015</span>
						</li>
					<li>
				<a href="https://keptenkurk.wordpress.com/2014/12/14/explaining-gaps-in-ads-b-receiver-range/">Explaining gaps in ADS-B receiver&nbsp;range</a>
							<span class="post-date">14/12/2014</span>
						</li>
					<li>
				<a href="https://keptenkurk.wordpress.com/2014/11/13/ads-b-performance-upgrade/">ADS-B performance upgrade</a>
							<span class="post-date">13/11/2014</span>
						</li>
					<li>
				<a href="https://keptenkurk.wordpress.com/2014/11/06/tuning-an-ads-b-bandpass-filter/">Tuning an ADS-B bandpass&nbsp;filter</a>
							<span class="post-date">06/11/2014</span>
						</li>
					<li>
				<a href="https://keptenkurk.wordpress.com/2014/11/05/a-homebrew-1090mhz-ads-b-filter/">A homebrew 1090Mhz ADS-B interdigital&nbsp;bandpassfilter</a>
							<span class="post-date">05/11/2014</span>
						</li>
					<li>
				<a href="https://keptenkurk.wordpress.com/2014/11/04/ads-b-collinear-antenna/">ADS-B Collinear antenna</a>
							<span class="post-date">04/11/2014</span>
						</li>
					<li>
				<a href="https://keptenkurk.wordpress.com/2014/10/05/adsb-the-easy-way/">ADS-B The easy&nbsp;way</a>
							<span class="post-date">05/10/2014</span>
						</li>
					<li>
				<a href="https://keptenkurk.wordpress.com/2014/08/28/ff34-preview/">FF34 preview</a>
							<span class="post-date">28/08/2014</span>
						</li>
					<li>
				<a href="https://keptenkurk.wordpress.com/2014/08/19/ssd1306-128x64-oled-display-part2-software/">SSD1306 128&#215;64 OLED display (Part2:&nbsp;Software)</a>
							<span class="post-date">19/08/2014</span>
						</li>
					<li>
				<a href="https://keptenkurk.wordpress.com/2014/08/18/ssd1306-128x64-oled-display/">SSD1306 128&#215;64 OLED display (Part1:&nbsp;Hardware)</a>
							<span class="post-date">18/08/2014</span>
						</li>
					<li>
				<a href="https://keptenkurk.wordpress.com/2014/08/14/the-big-picture/">The big picture&#8230;</a>
							<span class="post-date">14/08/2014</span>
						</li>
				</ul>
		</li>		<li id="linkcat-5041781" class="widget-container widget_links"><h3 class="widget-title">References</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://www.domoticz.com" title="Home automation project" target="_blank">Domoticz</a></li>
<li><a href="http://www.Flyfish-tech.com/">Flyfish-tech</a></li>

	</ul>
</li>
<li id="archives-4" class="widget-container widget_archive"><h3 class="widget-title">Archives</h3>		<label class="screen-reader-text" for="archives-dropdown-4">Archives</label>
		<select id="archives-dropdown-4" name="archive-dropdown" onchange='document.location.href=this.options[this.selectedIndex].value;'>
			
			<option value="">Select Month</option>
				<option value='https://keptenkurk.wordpress.com/2016/03/'> March 2016 </option>
	<option value='https://keptenkurk.wordpress.com/2016/02/'> February 2016 </option>
	<option value='https://keptenkurk.wordpress.com/2015/11/'> November 2015 </option>
	<option value='https://keptenkurk.wordpress.com/2015/08/'> August 2015 </option>
	<option value='https://keptenkurk.wordpress.com/2015/01/'> January 2015 </option>
	<option value='https://keptenkurk.wordpress.com/2014/12/'> December 2014 </option>
	<option value='https://keptenkurk.wordpress.com/2014/11/'> November 2014 </option>
	<option value='https://keptenkurk.wordpress.com/2014/10/'> October 2014 </option>
	<option value='https://keptenkurk.wordpress.com/2014/08/'> August 2014 </option>

		</select>
		</li><li id="blog-stats-2" class="widget-container widget_blog-stats"><h3 class="widget-title">Stats</h3>		<ul>
			<li>38,986 hits</li>
		</ul>
		</li>			</ul>
		</div><!-- #primary .widget-area -->

	</div><!-- #main -->

	<div id="footer" role="contentinfo">
		<div id="colophon">



			<div id="site-info">
				<a href="https://keptenkurk.wordpress.com/" title="Projects by Keptenkurk" rel="home">
					Projects by Keptenkurk				</a>
			</div><!-- #site-info -->

			<div id="site-generator">
								<a href="https://wordpress.com/?ref=footer_blog">Blog at WordPress.com.</a>
			</div><!-- #site-generator -->

		</div><!-- #colophon -->
	</div><!-- #footer -->

</div><!-- #wrapper -->

		<script type="text/javascript">
		//<![CDATA[
		var infiniteScroll = {"settings":{"id":"content","ajaxurl":"https:\/\/keptenkurk.wordpress.com\/?infinity=scrolling","type":"scroll","wrapper":true,"wrapper_class":"infinite-wrap","footer":"wrapper","click_handle":"1","text":"Older posts","totop":"Scroll back to top","currentday":"30.03.16","order":"DESC","scripts":[],"styles":[],"google_analytics":false,"offset":0,"history":{"host":"keptenkurk.wordpress.com","path":"\/page\/%d\/","use_trailing_slashes":true,"parameters":""},"query_args":{"error":"","m":"","p":0,"post_parent":"","subpost":"","subpost_id":"","attachment":"","attachment_id":0,"name":"","static":"","pagename":"","page_id":0,"second":"","minute":"","hour":"","day":0,"monthnum":0,"year":0,"w":0,"category_name":"","tag":"","cat":"","tag_id":"","author":"","author_name":"","feed":"","tb":"","paged":0,"meta_key":"","meta_value":"","preview":"","s":"","sentence":"","title":"","fields":"","menu_order":"","embed":"","category__in":[],"category__not_in":[],"category__and":[],"post__in":[],"post__not_in":[],"post_name__in":[],"tag__in":[],"tag__not_in":[],"tag__and":[],"tag_slug__in":[],"tag_slug__and":[],"post_parent__in":[],"post_parent__not_in":[],"author__in":[],"author__not_in":[],"posts_per_page":7,"ignore_sticky_posts":false,"suppress_filters":false,"cache_results":false,"update_post_term_cache":true,"lazy_load_term_meta":true,"update_post_meta_cache":true,"post_type":"","nopaging":false,"comments_per_page":"50","no_found_rows":false,"order":"DESC"},"last_post_date":"2015-08-29 23:52:52","stats":"blog=72451567&v=wpcom&tz=2&user_id=0&subd=keptenkurk&x_pagetype=infinite"}};
		//]]>
		</script>
		<!--  -->
<script type='text/javascript' src='//0.gravatar.com/js/gprofiles.js?ver=201651y'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='https://s1.wp.com/wp-content/mu-plugins/gravatar-hovercards/wpgroho.js?m=1380573781h'></script>

	<script>
		//initialize and attach hovercards to all gravatars
		jQuery( document ).ready( function( $ ) {

			if (typeof Gravatar === "undefined"){
				return;
			}

			if ( typeof Gravatar.init !== "function" ) {
				return;
			}			

			Gravatar.profile_cb = function( hash, id ) {
				WPGroHo.syncProfileData( hash, id );
			};
			Gravatar.my_hash = WPGroHo.my_hash;
			Gravatar.init( 'body', '#wp-admin-bar-my-account' );
		});
	</script>

		<div style="display:none">
	</div>
<script type='text/javascript'>
/* <![CDATA[ */
var HighlanderComments = {"loggingInText":"Logging In\u2026","submittingText":"Posting Comment\u2026","postCommentText":"Post Comment","connectingToText":"Connecting to %s","commentingAsText":"%1$s: You are commenting using your %2$s account.","logoutText":"Log Out","loginText":"Log In","connectURL":"https:\/\/keptenkurk.wordpress.com\/public.api\/connect\/?action=request","logoutURL":"https:\/\/keptenkurk.wordpress.com\/wp-login.php?action=logout&_wpnonce=93056841fe","homeURL":"https:\/\/keptenkurk.wordpress.com\/","postID":"394","gravDefault":"identicon","enterACommentError":"Please enter a comment","enterEmailError":"Please enter your email address here","invalidEmailError":"Invalid email address","enterAuthorError":"Please enter your name here","gravatarFromEmail":"This picture will show whenever you leave a comment. Click to customize it.","logInToExternalAccount":"Log in to use details from one of these accounts.","change":"Change","changeAccount":"Change Account","comment_registration":"0","userIsLoggedIn":"","isJetpack":"0","text_direction":"ltr"};
/* ]]> */
</script>
<script type='text/javascript' src='https://s2.wp.com/_static/??/wp-content/js/jquery/jquery.autoresize.js,/wp-content/mu-plugins/highlander-comments/script.js?m=1479964158j'></script>
		<div id="infinite-footer">
			<div class="container">
				<div class="blog-info">
					<a id="infinity-blog-title" href="https://keptenkurk.wordpress.com/" rel="home">
						Projects by Keptenkurk					</a>
				</div>
				<div class="blog-credits">
					<a href="https://wordpress.com/?ref=footer_website">Create a free website or blog at WordPress.com.</a> 				</div>
			</div>
		</div><!-- #infinite-footer -->
		
	<div id="carousel-reblog-box">
		<form action="" name="carousel-reblog">
			<textarea id="carousel-reblog-content" name="carousel-reblog-content" placeholder="Add your thoughts here... (optional)"></textarea>
			<label for="carousel-reblog-to-blog-id" id="carousel-reblog-lblogid">Post to</label>
			<select name="carousel-reblog-to-blog-id" id="carousel-reblog-to-blog-id">
						</select>

			<div class="submit">
				<span class="canceltext"><a href="" class="cancel">Cancel</a></span>
				<input type="submit" name="carousel-reblog-submit" class="button" id="carousel-reblog-submit" value="Reblog Post" />
				<input type="hidden" id="carousel-reblog-blog-id" value="72451567" />
				<input type="hidden" id="carousel-reblog-blog-url" value="https://keptenkurk.wordpress.com" />
				<input type="hidden" id="carousel-reblog-blog-title" value="Projects by Keptenkurk" />
				<input type="hidden" id="carousel-reblog-post-url" value="" />
				<input type="hidden" id="carousel-reblog-post-title" value="" />
			</div>

			<input type="hidden" id="_wpnonce" name="_wpnonce" value="10d7603c7c" /><input type="hidden" name="_wp_http_referer" value="/" />		</form>

		<div class="arrow"></div>
	</div>
<link rel='stylesheet' id='all-css-0-3' href='https://s1.wp.com/wp-content/mu-plugins/carousel/jetpack-carousel.css?m=1481571546h' type='text/css' media='all' />
<!--[if lte IE 8]>
<link rel='stylesheet' id='jetpack-carousel-ie8fix-css'  href='https://s1.wp.com/wp-content/mu-plugins/carousel/jetpack-carousel-ie8fix.css?m=1412618825h&#038;ver=20121024' type='text/css' media='all' />
<![endif]-->
<link rel='stylesheet' id='all-css-2-3' href='https://s1.wp.com/wp-content/mu-plugins/tiled-gallery/tiled-gallery.css?m=1443731146h' type='text/css' media='all' />
<script type='text/javascript'>
/* <![CDATA[ */
var jetpackSlideshowSettings = {"spinner":"https:\/\/s1.wp.com\/wp-content\/mu-plugins\/shortcodes\/img\/slideshow-loader.gif","blog_id":"72451567","blog_subdomain":"keptenkurk","user_id":"0"};
/* ]]> */
</script>
<script type='text/javascript'>
/* <![CDATA[ */
var actionbardata = {"siteID":"72451567","siteName":"Projects by Keptenkurk","siteURL":"http:\/\/keptenkurk.wordpress.com","icon":"<img alt='' src='https:\/\/s1.wp.com\/i\/void.gif' class='avatar avatar-36' height='36' width='36' \/>","canManageOptions":"","canCustomizeSite":"","isFollowing":"","themeSlug":"pub\/twentyten","signupURL":"https:\/\/wordpress.com\/start\/","loginURL":"https:\/\/keptenkurk.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fkeptenkurk.wordpress.com%2F2016%2F03%2F30%2Fconnecting-the-medisana-bs440-bluetooth-scale-part-5%2F","themeURL":"https:\/\/wordpress.com\/themes\/twentyten\/","xhrURL":"https:\/\/keptenkurk.wordpress.com\/wp-admin\/admin-ajax.php","nonce":"2e8fb440df","isSingular":"","isFolded":"","isLoggedIn":"","isMobile":"","subscribeNonce":"<input type=\"hidden\" id=\"_wpnonce\" name=\"_wpnonce\" value=\"d22264a5e2\" \/>","referer":"https:\/\/keptenkurk.wordpress.com\/","canFollow":"1","statusMessage":"","customizeLink":"https:\/\/keptenkurk.wordpress.com\/wp-admin\/customize.php?url=https%3A%2F%2Fkeptenkurk.wordpress.com%2F","i18n":{"view":"View Site","follow":"Follow","following":"Following","edit":"Edit","login":"Log In","signup":"Sign Up","customize":"Customize","report":"Report this content","themeInfo":"Get theme: Twenty Ten","shortlink":"Copy shortlink","copied":"Copied","followedText":"New posts from this site will now appear in your <a href=\"https:\/\/wordpress.com\/\">Reader<\/a>","foldBar":"Collapse this bar","unfoldBar":"Expand this bar","editFollows":"Manage Sites I Follow","editSubs":"Manage Subscriptions","viewReader":"View Site in the Reader","subscribe":"Sign me up","enterEmail":"Enter your email address","followers":"","alreadyUser":"Already have a WordPress.com account? <a href=\"https:\/\/keptenkurk.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fkeptenkurk.wordpress.com%2F2016%2F03%2F30%2Fconnecting-the-medisana-bs440-bluetooth-scale-part-5%2F\">Log in now.<\/a>"}};
/* ]]> */
</script>
<script type='text/javascript'>
/* <![CDATA[ */
var jetpackCarouselStrings = {"widths":[370,700,1000,1200,1400,2000],"is_logged_in":"","lang":"en","ajaxurl":"https:\/\/keptenkurk.wordpress.com\/wp-admin\/admin-ajax.php","nonce":"87d4558c31","display_exif":"1","display_geo":"1","single_image_gallery":"1","single_image_gallery_media_file":"","background_color":"black","comment":"Comment","post_comment":"Post Comment","write_comment":"Write a Comment...","loading_comments":"Loading Comments...","download_original":"View full size <span class=\"photo-size\">{0}<span class=\"photo-size-times\">\u00d7<\/span>{1}<\/span>","no_comment_text":"Please be sure to submit some text with your comment.","no_comment_email":"Please provide an email address to comment.","no_comment_author":"Please provide your name to comment.","comment_post_error":"Sorry, but there was an error posting your comment. Please try again later.","comment_approved":"Your comment was approved.","comment_unapproved":"Your comment is in moderation.","camera":"Camera","aperture":"Aperture","shutter_speed":"Shutter Speed","focal_length":"Focal Length","comment_registration":"0","require_name_email":"1","login_url":"https:\/\/keptenkurk.wordpress.com\/wp-login.php?redirect_to=https%3A%2F%2Fkeptenkurk.wordpress.com%2F2016%2F03%2F30%2Fconnecting-the-medisana-bs440-bluetooth-scale-part-5%2F","blog_id":"72451567","local_comments_commenting_as":"<fieldset><label for=\"email\">Email (Required)<\/label> <input type=\"text\" name=\"email\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-email-field\" \/><\/fieldset><fieldset><label for=\"author\">Name (Required)<\/label> <input type=\"text\" name=\"author\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-author-field\" \/><\/fieldset><fieldset><label for=\"url\">Website<\/label> <input type=\"text\" name=\"url\" class=\"jp-carousel-comment-form-field jp-carousel-comment-form-text-field\" id=\"jp-carousel-comment-form-url-field\" \/><\/fieldset>","reblog":"Reblog","reblogged":"Reblogged","reblog_add_thoughts":"Add your thoughts here... (optional)","reblogging":"Reblogging...","post_reblog":"Post Reblog","stats_query_args":"blog=72451567&v=wpcom&tz=2&user_id=0&subd=keptenkurk","is_public":"1","reblog_enabled":""};
/* ]]> */
</script>
<script type='text/javascript' src='https://s1.wp.com/_static/??-eJyNj9FuwjAMRX9oIaoEgxfEtwTXrA5pnMVOu/79AlK7iYeIt+ube09sOycDHBWjWi+2x4kA08/Oy4f99zQWk0L5oig20B3FfhcsOLjYB8yNMMUbRdJlE42sDJwVuK/0uomvP+RlBwsEfLskgaoaeDab3+i6fqRori7b0YlirsrwhDk/IH9eiwBKHB+ETTXS4DIXwWA9anJwN6uxdihCKOsp842vHkFfgSttqluydSKoz8JzThlFauMynrv9qTscu8P+0/8CjdC3Nw=='></script>
<script type='text/javascript' src='https://platform.twitter.com/widgets.js?ver=20111117'></script>
<script type='text/javascript' src='https://s0.wp.com/_static/??-eJyVy7EOQEAMANAfUnViYBDfgmsupepyivh7VpMY3/DwjDCuaqSGyw5R9sC6oZ1sRgkG6cd54OQhMqHSQYnUs4Z82jL8c+P3YyEPoRehdL31rG5pXVXUTVO70k03DU5D1g=='></script>
<script type="text/javascript">
// <![CDATA[
(function() {
try{
  if ( window.external &&'msIsSiteMode' in window.external) {
    if (window.external.msIsSiteMode()) {
      var jl = document.createElement('script');
      jl.type='text/javascript';
      jl.async=true;
      jl.src='/wp-content/plugins/ie-sitemode/custom-jumplist.php';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jl, s);
    }
  }
}catch(e){}
})();
// ]]>
</script>	<script type="text/javascript">
	var skimlinks_pub_id = "725X584219"
	var skimlinks_sitename = "keptenkurk.wordpress.com";
	</script>
	<script type="text/javascript" src="https://s.skimresources.com/js/725X1342.skimlinks.js"></script><script type="text/javascript">
			jQuery.extend( infiniteScroll.settings.scripts, ["jquery","jquery-core","jquery-migrate","mobile-useragent-info","postmessage","jquery_inview","jetpack_resize","spin","jquery.spin","grofiles-cards","wpgroho","jquery.autoresize","highlander-comments","devicepx","jetpack_likes_queuehandler","the-neverending-homepage","jquery-cycle","jetpack-slideshow","wpcom-masterbar-js","wpcom-actionbar-bar","jetpack-carousel","swfobject","videopress","twitter-widgets","twitter-widgets-infinity","twitter-widgets-pending","tiled-gallery"] );
			jQuery.extend( infiniteScroll.settings.styles, ["wpcom-smileys","jetpack_likes","the-neverending-homepage","jetpack-slideshow","wpcom-core-compat-playlist-styles","mp6hacks","wpcom-bbpress2-staff-css","twentyten-wpcom-style","noticons","geo-location-flair","reblogging","infinity-twentyten","wpcom-actionbar-bar","h4-global","highlander-comments","highlander-comments-ie7","jetpack-carousel","tiled-gallery","jetpack-carousel-ie8fix"] );
		</script>		<script>
			var _comscore = _comscore || [];
			_comscore.push({
				c1: "2",
				c2: "7518284"
			});
			(function() {
				var s = document.createElement("script"),
					el = document.getElementsByTagName("script")[0];
				s.async = true;
				s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";
				el.parentNode.insertBefore(s, el);
			})();
		</script>
		<noscript>
			<p class="robots-nocontent"><img src="https://sb.scorecardresearch.com/p?c1=2&c2=7518284&c3=&c4=&c5=&c6=&c15=&cv=2.0&cj=1" alt="" style="display:none;" width="1" height="1" /></p>
		</noscript><script src="//stats.wp.com/w.js?55" type="text/javascript" async defer></script>
<script type="text/javascript">
_tkq = window._tkq || [];
_stq = window._stq || [];
_tkq.push(['storeContext', {'blog_id':'72451567','blog_tz':'2','user_lang':'en','blog_lang':'en','user_id':'0'}]);
_stq.push(['view', {'blog':'72451567','v':'wpcom','tz':'2','user_id':'0','subd':'keptenkurk'}]);
_stq.push(['extra', {'crypt':'UE40eW5QN0p8M2Y/RE1LVmwrVi5vQS5fVFtfdHBbPyw1VXIrU3hWLHhzVndTdktBX0ddJnpXRjVaOTd6fj1YMX4ydzR4NTB6Qz9YLFBRWTFdSG15X0JwSElHW2RiJnJsdXZLYjB4aEs5SHBrYTdHZ2hMLkF4QUJ8ajZGM2VYRzRqRSx6RHMmQnlZSl93VmtBXThXTTlJRF0wTFovZTZBcXklWXkteG1EQk1jbkE/Zkt+aXF4TnRjVlpvSmpYYXRqcnd+MXw3eCYtN1JMRC05cVBLQVt0bGhNWSU1T2I1XV16cVRLWV1FNG93X0JdJiVJSkcvK3daU1gmSmRVNUxFVVFYWWZfbFhSREV6ajRBLTNhQ2RXP21tUDhwOEZF'}]);
_stq.push([ 'clickTrackerInit', '72451567', '0' ]);
	</script>
<noscript><img src="https://pixel.wp.com/b.gif?v=noscript" style="height:0px;width:0px;overflow:hidden" alt="" /></noscript>
<script>
if ( 'object' === typeof wpcom_mobile_user_agent_info ) {

	wpcom_mobile_user_agent_info.init();
	var mobileStatsQueryString = "";
	
	if( false !== wpcom_mobile_user_agent_info.matchedPlatformName )
		mobileStatsQueryString += "&x_" + 'mobile_platforms' + '=' + wpcom_mobile_user_agent_info.matchedPlatformName;
	
	if( false !== wpcom_mobile_user_agent_info.matchedUserAgentName )
		mobileStatsQueryString += "&x_" + 'mobile_devices' + '=' + wpcom_mobile_user_agent_info.matchedUserAgentName;
	
	if( wpcom_mobile_user_agent_info.isIPad() )
		mobileStatsQueryString += "&x_" + 'ipad_views' + '=' + 'views';

	if( "" != mobileStatsQueryString ) {
		new Image().src = document.location.protocol + '//pixel.wp.com/g.gif?v=wpcom-no-pv' + mobileStatsQueryString + '&baba=' + Math.random();
	}
	
}
</script></body>
</html>
<!--
	generated in 0.357 seconds
	107115 bytes batcached for 300 seconds
-->
